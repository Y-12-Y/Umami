(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{266:function(e,t,a){e.exports=a(438)},320:function(e,t){},436:function(e,t,a){},437:function(e,t,a){},438:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),c=a.n(s),l=a(24),i=a(11),o=a(10),u=a(12),m=a(13),p=a(14),d=a(30),h=a(38),g=a(6),f=a.n(g),v=a(17),y=Object(h.a)(),E=a(126),b=a.n(E),O=b.a.create({withCredentials:!0}),w=function(e,t,a){return j(e,"GET",t,a)},N=function(e,t,a){return j(e,"POST",t,a)},x=function(e,t,a){return j(e,"PUT",t,a)};function j(e){var t,a,n,r,s=arguments;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:"get",a=s.length>2&&void 0!==s[2]?s[2]:null,n=s.length>3&&void 0!==s[3]?s[3]:null,s.length>4?s[4]:void 0,c.prev=4,c.next=7,f.a.awrap(O({url:"".concat("/api/").concat(e),method:t,data:a,params:n}));case 7:return r=c.sent,c.abrupt("return",r.data);case 11:throw c.prev=11,c.t0=c.catch(4),console.log("Had Issues ".concat(t,"ing to the backend, endpoint: ").concat(e,", with data: ").concat(a,", with params: ").concat(n)),console.dir(c.t0),c.t0.response&&401===c.t0.response.status&&y.push("/"),c.t0;case 17:case"end":return c.stop()}}),null,null,[[4,11]])}var C={query:function(e,t,a){var n,r;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e?(n={userId:e.userId,at:e.at,type:e.type,tags:e.tags},e.location&&(n.city=e.location.city,n.country=e.location.country)):t?n=t.meals?{group:t._id,meals:t.meals.$push}:{group:t._id}:a&&(n={distinct:a._id}),s.next=3,f.a.awrap(w("meal",e,n));case 3:return r=s.sent,s.abrupt("return",r);case 5:case"end":return s.stop()}}))},getById:function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(w("".concat("meal","/").concat(e)));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},add:function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(N("".concat("meal"),e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},update:function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(x("".concat("meal","/").concat(e._id),e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},getMealForRegistration:function(e){var t=Object(v.a)({},e),a=Date.now(),n=[];return t.occurrences.forEach((function(e){e.total<t.capacity&&e.date>a&&n.push(e)})),t.occurrences=n,t}};function k(e){return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(C.query(e));case 2:a=n.sent,t({type:"LOAD_MEALS",meals:a});case 4:case"end":return n.stop()}}))}}function M(){return function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(C.query(null));case 2:t=a.sent,e({type:"LOAD_HOME_MEALS",meals:t});case 4:case"end":return a.stop()}}))}}function I(e){return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(C.query(e));case 2:a=n.sent,t({type:"LOAD_USER_MEAL",userMeals:a});case 4:case"end":return n.stop()}}))}}function S(){var e={_id:"$location.city"};return function(t){var a,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.a.awrap(C.query(null,e));case 2:a=r.sent,n=a.map((function(e){return e._id})),t({type:"LOAD_CITIES",citiesToReducer:n});case 5:case"end":return r.stop()}}))}}function D(){var e={_id:"$location.city",meals:{$push:"$$ROOT"}};return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(C.query(null,e));case 2:a=n.sent,t({type:"LOAD_MEALS",meals:a});case 4:case"end":return n.stop()}}))}}function T(){var e={_id:"$cuisineType",meals:{$push:"$$ROOT"}};return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(C.query(null,e));case 2:a=n.sent,t({type:"LOAD_MEALS",meals:a});case 4:case"end":return n.stop()}}))}}function A(){var e={_id:"$cuisineType"};return function(t){var a,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.a.awrap(C.query(null,e));case 2:a=r.sent,n=a.map((function(e){return e._id})),t({type:"LOAD_CUISINES",cuisineTypesToReducer:n});case 5:case"end":return r.stop()}}))}}function L(e){return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(C.getById(e));case 2:a=n.sent,t({type:"GET_MEAL_BY_ID",meal:a});case 4:case"end":return n.stop()}}))}}function U(e){var t=e._id?"UPDATE_MEAL":"ADD_MEAL";return"UPDATE_MEAL"===t?function(a){var n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.a.awrap(C.update(e));case 2:n=r.sent,a({type:t,meal:n});case 4:case"end":return r.stop()}}))}:function(a){var n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.a.awrap(C.add(e));case 2:n=r.sent,a({type:t,meal:n});case 4:case"end":return r.stop()}}))}}var _,R=a(238),F=a.n(R),B={setup:function(){_=F()("/")},terminate:function(){_=null},on:function(e,t){_.on(e,t)},off:function(e,t){_.off(e,t)},emit:function(e,t){_.emit(e,t)}};function P(e){return function(t){return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(t(H(e)));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))}}function H(e){return{type:"SET_FILTER",filter:e}}var q=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={val:""},a.handleChange=function(e){return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:"Enter"!==e.key&&a.setState({val:e.target.value});case 1:case"end":return t.stop()}}))},a.onSearchAction=function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("Enter"!==e.key&&"click"!==e.type){n.next=5;break}return t=a.state.val,n.next=4,f.a.awrap(a.setState({val:""}));case 4:a.props.history.push("/meal/results/".concat(t));case 5:case"end":return n.stop()}}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-search-container container margin-top-20"},r.a.createElement("input",{className:"search-input",type:"text",placeholder:this.props.placeholder,value:this.state.val,onChange:this.handleChange,onKeyUp:this.onSearchAction}))}}]),t}(n.Component),Y={setFilter:P},G=Object(d.f)(Object(l.b)((function(e){return{filter:e.filter.filter}}),Y)(q)),$=a(52),W=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.category?r.a.createElement($.a,{to:"/meal/".concat(this.props.displayCategory.toLowerCase(),"/").concat(this.props.category.name)},r.a.createElement("div",{className:"category-card-sm flex column"},r.a.createElement("img",{src:this.props.category.imgUrl,alt:"category",className:"card-img"}),r.a.createElement("h5",{className:"card-name"},this.props.category.name))):r.a.createElement("div",null)}}]),t}(n.Component),z=a(19),J=a(50);function K(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e}function V(e,t){var a=[],n=new Map,r=!0,s=!1,c=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var o=l.value;n.has(o[t])||(n.set(o[t],!0),a.push(Object(v.a)({},o)))}}catch(u){s=!0,c=u}finally{try{r||null==i.return||i.return()}finally{if(s)throw c}}return a}function X(e,t){var a="",n={default:"https://res.cloudinary.com/contentexs/image/upload/v1580324681/default-c.jpg",american:"https://res.cloudinary.com/contentexs/image/upload/v1580322135/tex-mex.jpg",asian:"https://res.cloudinary.com/contentexs/image/upload/v1580322135/asian.jpg",spanish:"https://res.cloudinary.com/contentexs/image/upload/v1580324681/barcelona.jpg",italian:"https://res.cloudinary.com/contentexs/image/upload/v1580322135/italian.jpg",greek:"https://res.cloudinary.com/contentexs/image/upload/v1580326079/greek.jpg",moroccan:"https://res.cloudinary.com/contentexs/image/upload/v1580322135/moroccan.jpg",indian:"https://res.cloudinary.com/contentexs/image/upload/v1580322135/indian.jpg",jewish:"https://res.cloudinary.com/contentexs/image/upload/v1580895267/jewish.jpg",israeli:"https://res.cloudinary.com/contentexs/image/upload/v1580895267/jewish.jpg",latin:"https://res.cloudinary.com/contentexs/image/upload/v1580895267/latin.jpg",caribbean:"https://res.cloudinary.com/contentexs/image/upload/v1580897677/caribbean.jpg",british:"https://res.cloudinary.com/contentexs/image/upload/v1580897912/british.jpg",mediterranian:"https://res.cloudinary.com/contentexs/image/upload/v1580898100/mediterranian.jpg",filipino:"https://res.cloudinary.com/contentexs/image/upload/v1580899463/filipino.jpg",balkan:"https://res.cloudinary.com/contentexs/image/upload/v1580899630/balkan.jpg",egyptian:"https://res.cloudinary.com/contentexs/image/upload/v1580900518/egyptian.jpg"},r={default:"https://res.cloudinary.com/contentexs/image/upload/v1580322153/default.jpg",dallas:"https://res.cloudinary.com/contentexs/image/upload/v1580322153/dallas.jpg",barcelona:"https://res.cloudinary.com/contentexs/image/upload/v1580894334/bkg-barcelona.jpg",duino:"https://res.cloudinary.com/contentexs/image/upload/v1580322154/duino.jpg",athens:"https://res.cloudinary.com/contentexs/image/upload/v1580322153/athens.jpg",marrakech:"https://res.cloudinary.com/contentexs/image/upload/v1580322154/marrakech.jpg",delhi:"https://res.cloudinary.com/contentexs/image/upload/v1580322153/delhi.jpg",bangkok:"https://res.cloudinary.com/contentexs/image/upload/v1580322153/bangkok.jpg","new-york":"https://res.cloudinary.com/contentexs/image/upload/v1580894333/newyork.jpg","tel-aviv":"https://res.cloudinary.com/contentexs/image/upload/v1580894334/telaviv.jpg",london:"https://res.cloudinary.com/contentexs/image/upload/v1580897254/london.jpg",sofia:"https://res.cloudinary.com/contentexs/image/upload/v1580897254/sofia.jpg",cairo:"https://res.cloudinary.com/contentexs/image/upload/v1580900443/cairo.jpg"};return"Cuisine"===e.type&&(a=n[t.toLowerCase()]?n[t.toLowerCase()]:n.default),"Location"===e.type&&(a=r[t.toLowerCase()]?r[t.toLowerCase()]:r.default),a}var Q={getItemsInRange:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null===a?e.filter((function(e){return e.date>t})):e.filter((function(e){return e.date>t&&e.date<=a}))},findAllByKey:function e(t,a){return Object.entries(t).reduce((function(t,n){var r=Object(J.a)(n,2),s=r[0],c=r[1];return s===a?t.concat(c):"object"===typeof c?t.concat(e(c,a)):t}),[])},getRandomCategories:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=Object(z.a)(e),r=[],s="Cuisine"===t?{type:t,property:"cuisineType"}:{type:t,property:"location.city"};n.forEach((function(e){var t=s.property.split(".").reduce((function(e,t){return e?e[t]:void 0}),e);r=[].concat(Object(z.a)(r),[{name:t,imgUrl:X(s,t)}])}));var c=(r=K(r=V(r,"name"))).length>=a?a:r.length;return r.slice(0,c)},getRandomMeals:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,a=Object(z.a)(e);if(a.length>0){var n=(a=K(a)).length>=t?t:a.length;return a.slice(0,n)}return[]}},Z=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={categories:[],displayCategory:""},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Q.getRandomCategories(this.props.meals,this.props.displayCategory);this.setState({categories:e||[],displayCategory:this.props.displayCategory})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"main-categories-container category-cards"},this.state.categories&&this.state.categories.map((function(t,a){return r.a.createElement(W,{key:a,category:t,displayCategory:e.props.displayCategory})})))}}]),t}(n.Component),ee=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(!this.props.meal)return r.a.createElement("div",null);var e=this.props.meal;return r.a.createElement($.a,{to:"/meal/".concat(e._id)},r.a.createElement("div",{className:"category-card"},r.a.createElement("div",{className:"img-wrapper"},r.a.createElement("img",{src:e.imgUrls[0],alt:"category",className:"card-img"})),r.a.createElement("h5",{className:"card-name"},e.cuisineType),r.a.createElement("div",{className:"card-total-one"},r.a.createElement("div",null,r.a.createElement("span",null,e.title))),r.a.createElement("div",{className:"card-hosted"},r.a.createElement("div",null,r.a.createElement("span",null,e.location.country," "),",",r.a.createElement("span",null,e.location.city," "))),r.a.createElement("div",{className:"card-avg-price"},r.a.createElement("div",null,r.a.createElement("span",{className:"title"},"Price:"),r.a.createElement("span",null,"\xa0",e.price))),r.a.createElement("div",{className:"card-btn"},r.a.createElement("span",{className:"btn"},"View Event"))))}}]),t}(n.Component),te=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={meals:[]},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Q.getRandomMeals(this.props.meals,4);this.setState({meals:e||[]})}},{key:"render",value:function(){return r.a.createElement("div",{className:"main-categories-container category-cards"},this.state.meals&&this.state.meals.map((function(e,t){return r.a.createElement(ee,{key:t,meal:e})})))}}]),t}(n.Component),ae=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-meet-hosts-container"},r.a.createElement("div",{className:"hosts"},r.a.createElement("div",{className:"host-container"},r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580359192/002.jpg",alt:"Our event hosts"}),r.a.createElement("h2",null,"Mary Smith"),r.a.createElement("h3",{className:"host-txt"}," I'm just someone who likes cooking and for whom sharing food is a form of expression."),r.a.createElement("blockquote",{className:"host-reviews"},"Amazing! I had such a fantastic time at Mary's home. She is a great host -- it felt like dinner with family. Wonderful, flavorful food and lots of it. Thank You!",r.a.createElement("cite",null,"Alberto Duncan"))),r.a.createElement("div",{className:"host-container"},r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580360371/001.jpg",alt:"Our event hosts"}),r.a.createElement("h2",null,"Kathy Wilson"),r.a.createElement("h3",{className:"host-txt"}," I love cooking with my friends, sharing recipes and meeting new people."),r.a.createElement("blockquote",{className:"host-reviews"},"Kathy and Luc were incredibly hospitable and full of stories from their incredibly full lives. The boat was beautiful and so was the area we saw while we were on it. One of the best meals I had in my life",r.a.createElement("cite",null,"Lisa Freeman"))),r.a.createElement("div",{className:"host-container"},r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580359192/003.jpg",alt:"Our event hosts"}),r.a.createElement("h2",null,"Luc Seath"),r.a.createElement("h3",{className:"host-txt"}," Astrophysicist by formation, IT Database Designer by profession and cook by passion."),r.a.createElement("blockquote",{className:"host-reviews"},"It was a very cozy and nice atmosphere. The food was prepared with great attention to detail and there was a huge variety of delicacies. Really very very tasty. It was great a pleasure!",r.a.createElement("cite",null,"Rob Smith")))))}}]),t}(n.Component),ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onAllCuisines=function(){a.props.history.push("/meal/cuisine")},a.onAllLocations=function(){a.props.history.push("/meal/location")},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.loadHomeMeals()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"hero-container"},r.a.createElement("div",{className:"hero-box flex column align-center"},r.a.createElement("div",{className:"text flex column align-center"},r.a.createElement("span",null,"let's eat."),r.a.createElement("span",null,"Discover Home Cooking Around The World")),r.a.createElement("div",{className:"how-to"},r.a.createElement("ul",{className:"clean-list flex align-center justify-center margin-bottom-20"},r.a.createElement("li",null,r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580171632/globe.svg",alt:"Food"}),r.a.createElement("span",null,r.a.createElement("span",null,"1.")," Location")),r.a.createElement("li",null,r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580171632/event.svg",alt:"Food"}),r.a.createElement("span",null,r.a.createElement("span",null,"2."),"Select")),r.a.createElement("li",null,r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580172376/calender.svg",alt:"Food"}),r.a.createElement("span",null,r.a.createElement("span",null,"3."),"Register")))),r.a.createElement("div",{className:"search-container"},r.a.createElement(G,{placeholder:"Where to ?  "})))),r.a.createElement("div",{className:"section-container"},this.props.meals&&this.props.meals.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section-title-container"},r.a.createElement("h2",null,"Browse Our Top Locations"),r.a.createElement("button",{className:"container btn-more-options",onClick:this.onAllLocations},"More Locations")),r.a.createElement(Z,{meals:this.props.meals,displayCategory:"Location"}))),r.a.createElement("div",{className:"section-container"},this.props.meals&&this.props.meals.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section-title-container"},r.a.createElement("h2",null,"View Our Exciting Cuisines"),r.a.createElement("button",{className:"container btn-more-options",onClick:this.onAllCuisines},"More Cuisines")),r.a.createElement(Z,{meals:this.props.meals,displayCategory:"Cuisine"}))),r.a.createElement("div",{className:"section-container"},this.props.meals&&this.props.meals.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section-title-container"},r.a.createElement("h2",null,"Here Are Our New Events")),r.a.createElement(te,{meals:this.props.meals}))),r.a.createElement("div",{className:"section-container"},r.a.createElement("div",{className:"section-title-container"},r.a.createElement("h2",null,"Meet Our Hosts")),r.a.createElement(ae,null)))}}]),t}(n.Component),re={loadHomeMeals:M},se=Object(l.b)((function(e){return{loggedInUser:e.user.loggedInUser,filter:e.filter.filter,meals:e.meal.homeMeals,msg:e.socket.msg}}),re)(ne),ce=(a(324),a(243)),le=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onCardClick=function(e){a.props.onCardClick(e)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"getNextDateFromNow",value:function(){var e,t=-1/0;return this.props.meal.occurrences.forEach((function(a,n){a.date>t&&a.date>Date.now()&&(t=a,e=n)})),{max:t,maxIdx:e}}},{key:"getDifferenceInDays",value:function(e){var t=new Date(e),a=new Date(Date.now()),n=(t.getTime()-a.getTime())/864e5;return Math.floor(n)}},{key:"getPromotionMsg",value:function(){var e=this.getNextDateFromNow();if(this.props.meal.isPromoted)return"super host";if(e.maxIdx){if(this.getDifferenceInDays(e.max.date)<=2)return"hurry up!";if(this.props.meal.capacity-this.props.meal.occurrences[e.maxIdx].attendees.length<4)return"".concat(this.props.meal.capacity-this.props.meal.occurrences[e.maxIdx].attendees.length," places left!")}return null}},{key:"getMainMsg",value:function(){return"location"===this.props.renderType?{val:this.props.meal.location.city,type:"location"}:{val:this.props.meal.cuisineType,type:"cuisine"}}},{key:"render",value:function(){var e=this.getMainMsg(),t=Object(z.a)(this.props.meal.reviews),a="location"===e.type?"https://res.cloudinary.com/contentexs/image/upload/v1580170530/dish-round.svg":"https://res.cloudinary.com/contentexs/image/upload/v1580171634/location.svg",n=(this.props.meal&&t&&this.props.getAvgRate(t),new Date(this.getNextDateFromNow().max.date)),s=this.getPromotionMsg();return n=n.toDateString().split(" ").slice(1,3).join(" "),this.props.meal&&r.a.createElement("div",{className:""},r.a.createElement("div",{className:"category-card-prev"},r.a.createElement("div",{className:"image-with-superhost"},s&&r.a.createElement("div",{className:"super-host-preview "},s),r.a.createElement("div",{className:"img-carousel-container"},r.a.createElement(ce.Carousel,{showThumbs:!1,showStatus:!1,infiniteLoop:!0},this.props.meal.imgUrls.map((function(e,t){return r.a.createElement("img",{key:t,src:e,alt:"",className:"card-img"})}))))),r.a.createElement("h5",{className:"card-name-prev"},e.val),r.a.createElement("div",{className:"card-total-one-prev"},r.a.createElement("img",{src:a,alt:"icon"}),r.a.createElement("div",null,r.a.createElement("span",null,"location"===e.type?this.props.meal.cuisineType:this.props.meal.location.city+", "+this.props.meal.location.country))),r.a.createElement("div",{className:"card-hosted-prev"},r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580170530/dinner-round.svg",alt:"dinner icon"}),r.a.createElement("div",null,r.a.createElement("span",null," ",this.props.meal.title," "))),r.a.createElement("div",{className:"card-next-date-prev"},r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580170530/calender-round.svg",alt:"calender icon"}),r.a.createElement("div",null,r.a.createElement("span",{className:"title-prev"},"Next Event Is On, ")," ",r.a.createElement("span",null,n))),r.a.createElement("div",{className:"card-avg-price-prev"},r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580328925/money.svg",alt:"money icon"}),r.a.createElement("div",null,r.a.createElement("span",{className:"title-prev"},"Price is "),r.a.createElement("span",null,"$",this.props.meal.price,r.a.createElement("small",null," (per guest)")))),r.a.createElement("div",{className:"card-btn-prev"},r.a.createElement($.a,{to:"/meal/".concat(this.props.meal._id),className:"btn"},r.a.createElement("span",{className:""},"View Event")))))}}]),t}(n.Component),ie=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"container category-cards-list"},this.props.meals.map((function(t){return r.a.createElement("div",{key:t._id},r.a.createElement(le,{onCardClick:e.props.onCardClick,meal:t,getAvgRate:e.props.getAvgRate,renderType:e.props.renderType}))})))}}]),t}(n.Component),oe=Object(d.f)(ie);function ue(e){return r.a.createElement("div",{className:e.isSelected,onClick:e.onBadgeClick},r.a.createElement("h3",{className:""},e.badge))}var me=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("span",{className:"container  badge-list-container margin-top-20"},this.props.badges&&this.props.badges.map((function(t,a){return r.a.createElement("div",{className:"badge-card-container ",key:a},r.a.createElement(ue,{isSelected:t===e.props.selectedBadge?"selected":"",onBadgeClick:e.props.onBadgeClick,badge:t}))})))}}]),t}(n.Component),pe=Object(d.f)(me),de=a(244),he=a.n(de);function ge(e){var t=e.type,a=e.color;return r.a.createElement(he.a,{type:t,color:a,height:100,width:100})}var fe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selectedBadge:"",renderType:"",isLoading:!0},a.resetFilterDefinitions=function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(a.props.setFilter({userId:"",at:"",type:"",location:{city:"",country:""},tags:""}));case 2:case"end":return e.stop()}}))},a.getAvgRate=function(e){return e.reduce((function(e,t){return e+parseInt(t.rate)}),0)/e.length},a.load=function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(a.props.load(a.props.filter));case 2:case"end":return e.stop()}}))},a.loadMeals=function(){var e,t,n,r;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!a.props.location.pathname.includes("results")){s.next=10;break}return e=a.props.match.params.results,s.next=4,f.a.awrap(a.props.setFilter(Object(v.a)({},a.filter,{tags:e})));case 4:return a.setState({isLoading:!0}),s.next=7,f.a.awrap(a.load());case 7:a.setState({isLoading:!1}),s.next=42;break;case 10:if(t="",a.props.location.pathname.includes("location")?t="location":a.props.location.pathname.includes("cuisine")&&(t="cuisine"),a.setBadges(t),a.setState({renderType:t}),"location"!==t){s.next=30;break}if(n=a.props.match.params.location){s.next=22;break}return s.next=19,f.a.awrap(a.props.loadMealsByLocation());case 19:a.setState({isLoading:!1}),s.next=28;break;case 22:return s.next=24,f.a.awrap(a.props.setFilter(Object(v.a)({},a.props.filter,{location:Object(v.a)({},a.props.location,{city:n})})));case 24:return a.setState({isLoading:!0}),s.next=27,f.a.awrap(a.load());case 27:a.setState({isLoading:!1});case 28:s.next=42;break;case 30:if(r=a.props.match.params.cuisine){s.next=36;break}a.props.loadMealsByCuisine(),a.setState({isLoading:!1}),s.next=42;break;case 36:return s.next=38,f.a.awrap(a.props.setFilter(Object(v.a)({},a.props.filter,{type:r})));case 38:return a.setState({isLoading:!0}),s.next=41,f.a.awrap(a.load());case 41:a.setState({isLoading:!1});case 42:case"end":return s.stop()}}))},a.setBadges=function(e){return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("location"!==e||a.props.cities.length>0){t.next=5;break}return t.next=3,f.a.awrap(a.props.loadCities());case 3:t.next=8;break;case 5:if("cuisine"!==e||a.props.cuisines.length>0){t.next=8;break}return t.next=8,f.a.awrap(a.props.loadCuisines());case 8:case"end":return t.stop()}}))},a.onLocationClick=function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.target.innerText,n.next=3,f.a.awrap(a.resetFilterDefinitions());case 3:return n.next=5,f.a.awrap(a.props.setFilter(Object(v.a)({},a.props.filter,{location:Object(v.a)({},a.props.filter.location,{city:t})})));case 5:return a.props.history.push("/meal/location/".concat(t)),n.next=8,f.a.awrap(a.loadMeals());case 8:case"end":return n.stop()}}))},a.onCuisineClick=function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.target.innerText,n.next=3,f.a.awrap(a.resetFilterDefinitions());case 3:return n.next=5,f.a.awrap(a.props.setFilter(Object(v.a)({},a.props.filter,{type:t})));case 5:return a.props.history.push("/meal/cuisine/".concat(t)),n.next=8,f.a.awrap(a.loadMeals());case 8:case"end":return n.stop()}}))},a.onCardClick=function(e){a.props.history.push("/meal/".concat(e))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.awrap(this.resetFilterDefinitions());case 2:if(!this.props.location.pathname.includes("results")){t.next=11;break}return this.setState({renderType:"results"}),e=this.props.match.params.results,t.next=7,f.a.awrap(this.props.setFilter(Object(v.a)({},this.filter,{tags:e})));case 7:return t.next=9,f.a.awrap(this.loadMeals());case 9:t.next=13;break;case 11:return t.next=13,f.a.awrap(this.loadMeals());case 13:case"end":return t.stop()}}),null,this)}},{key:"componentDidUpdate",value:function(e){return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(JSON.stringify(e.location.pathname)===JSON.stringify(this.props.location.pathname)){t.next=3;break}return t.next=3,f.a.awrap(this.loadMeals());case 3:case"end":return t.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(this.resetFilterDefinitions());case 2:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this.props.location.pathname.includes("results");return r.a.createElement("div",{className:"container"},r.a.createElement(G,null),this.state.isLoading&&(!this.props.cities&&"location"===this.state.renderType&&!e||!this.props.cuisines&&"cuisine"===this.state.renderType&&!e)&&r.a.createElement("div",{className:"spinner-container"},r.a.createElement(ge,{type:"spin"})),this.props.cuisines&&"cuisine"===this.state.renderType&&!e&&r.a.createElement(pe,{selectedBadge:this.state.selectedBadge,onBadgeClick:this.onCuisineClick,badges:this.props.cuisines}),this.props.cities&&"location"===this.state.renderType&&!e&&r.a.createElement(pe,{selectedBadge:this.state.selectedBadge,onBadgeClick:this.onLocationClick,badges:this.props.cities}),this.props.meals.length>0&&this.state.renderType&&!this.state.isLoading&&r.a.createElement(oe,{onCardClick:this.onCardClick,onCuisineClick:this.onCuisineClick,onLocationClick:this.onLocationClick,renderType:this.state.renderType,meals:this.props.meals,getAvgRate:this.getAvgRate}),!this.state.isLoading&&0===this.props.meals.length&&e&&r.a.createElement("div",null,"Your search has no results"))}}]),t}(n.Component),ve={load:k,setFilter:P,loadCuisines:A,loadCities:S,loadMealsByLocation:D,loadMealsByCuisine:T},ye=Object(l.b)((function(e){return{meals:e.meal.meals,filter:e.filter.filter,cities:e.meal.cities,cuisines:e.meal.cuisines}}),ve)(fe),Ee=function(e,t){var a,n={};if(!e)return null;var r=Object(v.a)({},e);return!(a=r.occurrences&&r.occurrences.length>0?Q.getItemsInRange(r.occurrences,new Date):[])||r.occurrences.length<1?{errorMsg:"There are no available events"}:((n={storeMeal:r,id:r._id,host:{_id:r.hostedBy._id,fullName:r.hostedBy.fullName,imgUrl:r.hostedBy.imgUrl},messages:{noAvailableOccurrence:"We are sorry, It seems we made a mistake and this event is not active. You will be redirected to our events page to continue browsing.",eventSoldOut:"We are sorry, It seems we made a mistake and this event is all sold out. You will be redirected to our events page to continue browsing.",hasAttendees:"Meet the other guests",noAttendees:"Be the first one to join.",userRegistered:"You are booked to this event",pleaseLogin:"Please login before proceeding."},registrationCart:{},selectedOccurance:{},availableDates:{},isPromoted:r.isPromoted,eventSetup:{capacity:parseInt(r.capacity),cuisineType:r.cuisineType,mealType:r.mealType,startTime:"Dinner"===r.mealType?"6:00PM":"Lunch"===r.mealType?"12:00PM":"9:00AM",endTime:"Dinner"===r.mealType?"9:00PM":"Lunch"===r.mealType?"4:00PM":"11:00AM"},price:parseFloat(r.price),currency:r.currency,title:r.title,description:r.description,eventMenu:r.menu,location:{country:r.location.country,city:r.location.city,address:r.location.address,lat:r.location.lat,lng:r.location.lng},images:r.imgUrls,hostReviews:r.reviews.map((function(e){return{user:{_id:e.byUser._id,fullName:e.byUser.fullName,imgUrl:e.byUser.imgUrl},date:e.at,txt:e.txt,rate:parseInt(e.rate)}})),occurrences:be(a,r.price,r.capacity,t?t._id:0)}).occurrences.sort(Q.sortByDate),n.selectedOccurance=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=null;return t?e.find((function(e){return new Date(e.date).getTime()===new Date(t).getTime()})):((a=e.find((function(e){return!0===Q.findAllByKey(e,"isLoggedInUser")})))||(a=e.find((function(e){return e.seatsLeft>0}))),!a&&e.length>0&&(a=e[0]),a)}(n.occurrences),n.availableDates=function(e,t){var a=[];return e.reduce((function(e,n){if(!a.includes(n.date)){a.push(n.date);var r=t&&n.id===t.id;e.push({date:n.date,isSelected:r})}return e}),[])}(n.occurrences,n.selectedOccurance),n.eventAttendees=function(e){var t=[];return e?e.reservations.reduce((function(e,a){return t.includes(a.user._id)||(t.push(a.user._id),e.push(a.user)),e}),[]):t}(n.selectedOccurance),n.hostRating=function(e){var t=e?e.length:0,a=0;t>0&&(a=e.reduce((function(e,t){return e+parseInt(t.rate)}),0)/t);return{totalRated:t,avgRate:a>0?a.toFixed(1):0}}(n.hostReviews),n)};function be(e,t,a,n){return e?e.map((function(e){var r=0;return{id:e.id,date:e.date,reservations:e.attendees.map((function(e){return r+=parseInt(e.numOfAttendees),{user:{_id:e._id,fullName:e.fullName,imgUrl:e.imgUrl},occurrenceAttendees:parseInt(e.numOfAttendees),occurrenceTotalPrice:parseInt(e.numOfAttendees)*parseInt(t),isLoggedInUser:n===e._id}})),totalReservations:r,seatsLeft:parseInt(a)-r}})):null}function Oe(e,t){return function(a){var n,r;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,f.a.awrap(C.getById(e));case 2:n=s.sent,r=Ee(n,t),a({type:"LOAD_DISPLAYED_MEAL",displayedMeal:r});case 5:case"end":return s.stop()}}))}}function we(e){return{type:"SET_SELECTED_OCCURRANCE",selectedOccurance:e}}function Ne(e,t){return function(a){var n,r;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,f.a.awrap(C.update(e));case 2:n=s.sent,r=Ee(n,t),a({type:"LOAD_DISPLAYED_MEAL",displayedMeal:r});case 5:case"end":return s.stop()}}))}}var xe=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.images;return r.a.createElement("div",{className:"gallery-container "},r.a.createElement("div",{className:"gallery"},r.a.createElement("figure",{className:"gallery-item"},r.a.createElement("img",{alt:"",name:"main",className:"gallery-img",src:e[0]})),r.a.createElement("figure",{className:"gallery-item"},r.a.createElement("img",{alt:"",name:"one",className:"gallery-img",src:e[1]})),r.a.createElement("figure",{className:"gallery-item"},r.a.createElement("img",{alt:"",name:"two",className:"gallery-img",src:e[2]})),r.a.createElement("figure",{className:"gallery-item"},r.a.createElement("img",{alt:"",name:"three",className:"gallery-img",src:e[3]}))))}}]),t}(n.Component),je=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hostRating,a=e.eventSetup;return r.a.createElement("div",{className:"card-simple nav-container"},r.a.createElement("div",{className:"top-box flex "},r.a.createElement("a",{className:"btn",href:"#menu"},"Menu"),r.a.createElement("a",{className:"btn",href:"#reviews"},"Reviews"),r.a.createElement("a",{className:"btn",href:"#location"},"Location")),r.a.createElement("div",{className:"bottom-box flex flex-shrink-30"},t.avgRate>0&&r.a.createElement("div",{className:t.avgRate&&t.avgRate>0?"rate":"hide"},r.a.createElement("i",{className:"icon-small fas fa-star"}),r.a.createElement("span",null,t.avgRate),r.a.createElement("span",null,"(",t.totalRated,")")),r.a.createElement("div",{className:"meal-period"},r.a.createElement("span",null,a.startTime)," - ",r.a.createElement("span",null,a.endTime)),r.a.createElement("div",null,a.mealType),r.a.createElement("div",null,a.cuisineType),r.a.createElement("div",{className:"meal-guests"},r.a.createElement("span",null,a.capacity),r.a.createElement("span",null," Guests "))))}}]),t}(n.Component),Ce=Object(l.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),{})(je),ke=a(65),Me=a.n(ke),Ie=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={meal:[],selectedOccurance:{},numOfAttendees:0,totalPrice:0,date:"",availableSeats:0,availableText:"",registerCounter:0,buttonText:"",paymentClass:"hide",displayMsg:"hide",msg:""},a.handleChange=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;if("numOfAttendees"===t&&a.state.numOfAttendees!==n)a.setState({numOfAttendees:parseInt(n),totalPrice:parseInt(n)*parseInt(a.state.meal.price),availableSeats:parseInt(a.state.availableSeats)-parseInt(n),availableText:"".concat(parseInt(a.state.availableSeats)-parseInt(n)," available seats")});else if(a.state.date!==n){var r=a.props.meal.occurrences.find((function(e){return Me()(e.date).format("MM-DD-YY")===n}));if(a.props.loggedInUser&&r.reservations&&r.reservations.length>0){var s=r.reservations.find((function(e){return e.user._id===a.props.loggedInUser._id}));s&&(s.isLoggedInUser=!0)}a.setState({date:n,selectedOccurance:r,availableSeats:parseInt(r.seatsLeft)-parseInt(a.state.numOfAttendees),availableText:"".concat(parseInt(r.seatsLeft)-parseInt(a.state.numOfAttendees)," available seats"),msg:"",displayMsg:"hide"},a.updateOccurrance)}},a.updateOccurrance=function(){a.props.onChangeDate(a.state.selectedOccurance)},a.onEventRegistration=function(e){if(e.preventDefault(),0===a.state.registerCounter)a.setState({registerCounter:1,buttonText:"Book Event",paymentClass:"payment"});else if(a.state.registerCounter>=1&&0!==a.state.numOfAttendees){if(!a.props.loggedInUser)return console.log("Meal Reservation - user not logged in"),void a.setState({msg:a.state.meal.messages.pleaseLogin,displayMsg:""});a.props.onEventRegistration({id:a.state.selectedOccurance.id,date:+Me()(a.state.date,"MM-DD-YY"),numOfAttendees:a.state.numOfAttendees}),a.setState({registerCounter:0,msg:"",displayMsg:"hide",buttonText:"Book Event",paymentClass:"hide"})}},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.meal,t=null;e.selectedOccurance&&e.selectedOccurance.reservations&&e.selectedOccurance.reservations.length>0?(t=e.selectedOccurance.reservations.find((function(e){return e.isLoggedInUser})),this.setState({meal:e,msg:t&&t.isLoggedInUser?e.messages.userRegistered:"",displayMsg:t&&t.isLoggedInUser?"":"hide",selectedOccurance:e.selectedOccurance,numOfAttendees:t&&t.isLoggedInUser?t.occurrenceAttendees:0,totalPrice:t&&t.isLoggedInUser?t.occurrenceTotalPrice:0,date:Me()(e.selectedOccurance.date).format("MM-DD-YY"),availableSeats:parseInt(e.selectedOccurance.seatsLeft),availableText:"".concat(e.selectedOccurance.seatsLeft," available seats"),registerCounter:0,buttonText:t&&t.isLoggedInUser?"Update Event":"Register Event",paymentClass:t&&t.isLoggedInUser?"payment":"hide"})):e.selectedOccurance?this.setState({meal:e,msg:"",displayMsg:"hide",selectedOccurance:e.selectedOccurance,numOfAttendees:0,totalPrice:0,date:Me()(e.selectedOccurance.date).format("MM-DD-YY"),availableSeats:parseInt(e.selectedOccurance.seatsLeft),availableText:"".concat(e.selectedOccurance.seatsLeft," available seats"),registerCounter:0,buttonText:"Register Event",paymentClass:"hide"}):this.setState({meal:e,msg:"",displayMsg:"hide",selectedOccurance:{},numOfAttendees:0,totalPrice:0,date:Me()(new Date).format("MM-DD-YY"),availableSeats:0,availableText:"There are no available seats",registerCounter:0,buttonText:"Event",paymentClass:"hide"})}},{key:"render",value:function(){var e=this.props.meal;return r.a.createElement("div",{className:"card-simple card-bkg-yellow  payment-container"},r.a.createElement("div",{className:"price"},r.a.createElement("span",null,"$"),e.price,r.a.createElement("small",null,"per guest")),r.a.createElement("div",null),r.a.createElement("div",{className:"details-container"},r.a.createElement("div",{className:"msg"},r.a.createElement("span",{className:this.state.displayMsg},this.state.msg)),r.a.createElement("div",{className:"date"},r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement("select",{name:"date",onChange:this.handleChange,value:this.state.date,style:{fontFamily:"raleway"},className:"minimal"},e.availableDates.length>0?e.availableDates.map((function(e,t){return r.a.createElement("option",{key:t,value:Me()(e.date).format("MM-DD-YY")},Me()(e.date).format("MM-DD-YY"))})):r.a.createElement("option",{key:1,value:"No Dates Available!"}))),r.a.createElement("div",{className:"guests"},r.a.createElement("label",{htmlFor:"numOfAttendees"},"Number of Guests"),r.a.createElement("input",{type:"number",placeholder:"Number of Guests",min:"1",name:"numOfAttendees",onChange:this.handleChange,value:0===this.state.numOfAttendees?"":this.state.numOfAttendees}),r.a.createElement("small",{className:"small-text"})),r.a.createElement("div",{className:this.state.paymentClass},r.a.createElement("ul",{className:"clean-list"},r.a.createElement("li",null,r.a.createElement("span",null,"$",e.price," x ",this.state.numOfAttendees),r.a.createElement("span",null,"guests")),r.a.createElement("li",null,r.a.createElement("span",null,"Total"),r.a.createElement("span",null,"$",this.state.totalPrice)))),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.onEventRegistration,className:"button btn-red"},this.state.buttonText))))}}]),t}(n.Component),Se=Object(l.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),null)(Ie),De=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",showLink:"hide",linkText:""},a.toggleText=function(e){if(e.preventDefault(),"show more"===a.state.linkText)a.setState({text:a.props.text,showLink:"",linkText:"show less"});else{var t=a.props.text.slice(0,180);a.setState({text:"".concat(t," ..."),showLink:"",linkText:"show more"})}},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.text.length;if(Math.floor(e/60)>this.props.showRows){var t=this.props.text.slice(0,180);this.setState({text:"".concat(t," ..."),showLink:"",linkText:"show more"})}else this.setState({text:this.props.text})}},{key:"render",value:function(){return r.a.createElement("div",{className:"show-hide-text-container"},r.a.createElement("h3",null,"A word about the experience"),r.a.createElement("p",null,this.state.text,r.a.createElement("a",{className:this.state.showLink,href:"#",onClick:this.toggleText},this.state.linkText)))}}]),t}(n.Component),Te=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.menu;return r.a.createElement("div",{className:" menu-main-container"},r.a.createElement("div",{className:"card-simple card-bkg-white menu-container"},r.a.createElement("div",{className:"main-title"},r.a.createElement("div",{className:"decor"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"41.125",height:"9.146"},r.a.createElement("path",{fill:"none",stroke:"#f8b500",strokeMiterlimit:"10",d:"M40.881 8.576L20.562.591.244 8.576"}),r.a.createElement("path",{fill:"none",stroke:"#f8b500",strokeMiterlimit:"10",d:"M40.881.591L20.562 8.576.243.591"}))),r.a.createElement("h3",{id:"menu"},"Menu"),r.a.createElement("div",{className:"decor"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"41.125",height:"9.146"},r.a.createElement("path",{fill:"none",stroke:"#f8b500",strokeMiterlimit:"10",d:"M40.881 8.576L20.562.591.244 8.576"}),r.a.createElement("path",{fill:"none",stroke:"#f8b500",strokeMiterlimit:"10",d:"M40.881.591L20.562 8.576.243.591"})))),r.a.createElement("div",{className:"menu-section"},r.a.createElement("h3",null,"First Course"),e.firstCourse.map((function(e,t){return r.a.createElement("div",{key:t,className:"menu-item"},e)}))),r.a.createElement("div",{className:"menu-section"},r.a.createElement("h3",null,"Main Course"),e.mainCourse.map((function(e,t){return r.a.createElement("div",{key:t,className:"menu-item"},e)}))),r.a.createElement("div",{className:"menu-section"},r.a.createElement("h3",null,"Dessert"),e.desserts.map((function(e,t){return r.a.createElement("div",{key:t,className:"menu-item"},e)}))),r.a.createElement("div",{className:"menu-section"},r.a.createElement("h3",null,"Beverages"),e.beverages.map((function(e,t){return r.a.createElement("div",{key:t,className:"menu-item"},e)})))))}}]),t}(n.Component),Ae=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.attendee;return r.a.createElement("div",{className:"frame"},r.a.createElement("div",{className:"card-simple-attendees center"},r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"image"},r.a.createElement("div",{className:"circle-1"}),r.a.createElement("div",{className:"circle-2"}),r.a.createElement("img",{src:e.imgUrl,width:"70",height:"70",alt:e.fullName})),r.a.createElement("div",{className:"name"},e.fullName),r.a.createElement("div",{className:"address"},"US, New-York"))))}}]),t}(n.Component),Le=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"getAttendeeList",value:function(){var e=this.props.currOccurrance,t=[];return e.reservations.forEach((function(e){t.push(e.user)})),t}},{key:"render",value:function(){var e=this.getAttendeeList();return r.a.createElement("div",{className:"main-attendees-container"},e&&e.map((function(e,t){return r.a.createElement(Ae,{key:t,attendee:e})})))}}]),t}(n.Component),Ue=a(15);function _e(e){return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:a=e,console.log("SocketAction -> msg",a),t({type:"ADD_MSG",msg:a});case 3:case"end":return n.stop()}}))}}var Re=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",txt:"",rate:0,starClass:"icon-medium color-gray far fa-star",starSelected:"icon-medium color-yellow fas fa-star",msgs:""},a.onSaveReviewForm=function(e){e.preventDefault(),a.props.onSaveReviewForm({email:a.state.email,txt:a.state.txt,rate:a.state.rate}),a.setState({email:"",txt:"",rate:0,starClass:"icon-medium color-gray far fa-star"})},a.onToggleStar=function(e){e.preventDefault();var t=e.target.id,n="1"===t&&"1"===a.state.rate?"0":t;a.setState({rate:n})},a.onHandleChange=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;a.setState(Object(Ue.a)({},t,n))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"flex "},r.a.createElement("div",{className:"main-review-form-container flex column"},r.a.createElement("form",{className:"review-form flex column align-center",onSubmit:this.onSaveReviewForm},r.a.createElement("h3",null,"How satisfied are you?"),r.a.createElement("div",{className:"rating flex margin-bottom-20"},Array.from(Array(5),(function(t,a){return r.a.createElement("i",{key:a,id:a+1,className:a<e.state.rate?e.state.starSelected:e.state.starClass,name:a+1,onClick:e.onToggleStar})}))),r.a.createElement("h3",null,"We would love to hear what you think"),r.a.createElement("div",{className:"email"},r.a.createElement("input",{type:"email",placeholder:"Email",name:"email",onChange:this.onHandleChange,required:!0})),r.a.createElement("div",{className:"review"},r.a.createElement("textarea",{className:"",id:"review",name:"txt",onChange:this.onHandleChange,min:"5",placeholder:"Tell us what you think"})),r.a.createElement("div",{className:"save flex justify-end"},r.a.createElement("button",{className:"button btn-yellow"},"SAVE"))),r.a.createElement("h4",{className:"review-h5"},"Thank you for taking the time & reviewing us.")))}}]),t}(n.Component),Fe={addMsg:_e},Be=Object(l.b)((function(e){return{loggedInUser:e.user.loggedInUser,msg:e.socket.msg}}),Fe)(Re),Pe=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.review;return r.a.createElement("div",{className:"review-container "},e&&r.a.createElement("blockquote",null,r.a.createElement("header",null,r.a.createElement("span",{"data-rating":e.rate||0},r.a.createElement("i",{className:"icon-small fas fa-star"}),r.a.createElement("i",{className:"icon-small fas fa-star"}),r.a.createElement("i",{className:"icon-small fas fa-star"}),r.a.createElement("i",{className:"icon-small fas fa-star"}),r.a.createElement("i",{className:"icon-small fas fa-star"})),r.a.createElement("strong",null,"Event Name "),r.a.createElement("span",null,Me()(e.date).format("MM-DD-YY")),r.a.createElement("span",null,"By ",r.a.createElement("em",null,e.user.fullName)),r.a.createElement("span",null,"Verified Review")),r.a.createElement("p",null,e.txt)))}}]),t}(n.Component),He=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.reviews;return r.a.createElement("div",{className:"main-reviews-container"},e&&e.map((function(e,t){return r.a.createElement(Pe,{key:t,review:e})})))}}]),t}(n.Component),qe=Object(l.b)((function(e){return{}}),{})(He),Ye=a(145),Ge={width:"60vw",height:"45vh"},$e=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=Object(v.a)({},this.props.location);return delete e.address,delete e.city,delete e.country,r.a.createElement(Ye.Map,{style:Ge,google:this.props.google,initialCenter:e,zoom:14},r.a.createElement(Ye.Marker,{name:"Current location"}))}}]),t}(n.Component),We=Object(Ye.GoogleApiWrapper)({apiKey:"AIzaSyDt708aK1FKYJTOT61i_xrzY9R3UD3_6Lw&&"})($e),ze=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={displayReviewForm:"hide",occurrenceAttendees:{}},a.signToSocketEvent=function(e){B.setup(),B.emit("newChannel","onEventRegistration".concat(e)),B.on("addMsg",a.addMsg)},a.unSignToSocketEvent=function(){B.off("addMsg",a.addMsg),B.terminate()},a.onEventRegistration=function(e){var t,n,r,s;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(!a.props.loggedInUser){c.next=15;break}if(t=a.props.loggedInUser,n=Object(v.a)({},a.props.displayedMeal.storeMeal),console.log("after spread",n),r=n.occurrences.find((function(t){return t.id===e.id}))){c.next=8;break}return console.log("onEventRegistration: couldn't find selected occurrence",e),c.abrupt("return");case 8:return(s=r.attendees.find((function(e){return e._id===t._id})))?s.numOfAttendees=parseInt(s.numOfAttendees)+parseInt(e.numOfAttendees):r.attendees=[].concat(Object(z.a)(r.attendees),[{_id:t._id,fullName:t.fullName,imgUrl:t.imgUrl,numOfAttendees:e.numOfAttendees}]),r.total=parseInt(r.total)+parseInt(e.numOfAttendees),c.next=13,f.a.awrap(a.props.updateMeal(n,a.props.loggedInUser));case 13:t.titleHost=n.title,B.emit("newMsg",{meal:n,loggedInUser:t});case 15:case"end":return c.stop()}}))},a.addMsg=function(e){},a.onToggleReviewForm=function(e){e.preventDefault(),a.setState({displayReviewForm:"hide"===a.state.displayReviewForm?"":"hide"})},a.onSaveReviewForm=function(e){var t,n,r;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!a.props.loggedInUser){s.next=7;break}return t=a.props.loggedInUser,n=Object(v.a)({},a.props.displayedMeal.storeMeal),r={byUser:{_id:t._id,fullName:t.fullName,imgUrl:t.imgUrl},txt:e.txt,rate:e.rate,at:Date.now()},n.reviews.length>0?n.reviews=[].concat(Object(z.a)(n.reviews),[r]):n.reviews=[r],s.next=7,f.a.awrap(a.props.updateMeal(n,a.props.loggedInUser));case 7:a.setState({displayReviewForm:"hide"});case 8:case"end":return s.stop()}}))},a.onChangeDate=function(e){a.props.changeSelectedOccurrance(e)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e,t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props.match.params.id,a.next=3,f.a.awrap(this.props.getMeal(e,this.props.loggedInUser));case 3:t=this.props.displayedMeal.storeMeal.hostedBy._id,this.signToSocketEvent(t),B.emit("newChannel","onEventRegistration".concat(t)),B.on("addMsg",this.addMsg);case 7:case"end":return a.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){this.props.loggedInUser||this.unSignToSocketEvent()}},{key:"render",value:function(){if(this.props.displayedMeal){var e=this.props.displayedMeal;return r.a.createElement("div",{className:"meal-details-page-container"},e&&r.a.createElement(r.a.Fragment,null,e.images&&e.images.length>0&&r.a.createElement(xe,{images:e.images}),r.a.createElement("div",{className:"container page-title"},r.a.createElement("h2",null,e.title)),r.a.createElement("div",{className:"container meal-details-container flex"},r.a.createElement("div",{className:"left-box"},r.a.createElement(Ce,{eventSetup:e.eventSetup,hostRating:e.hostRating}),r.a.createElement(De,{text:e.description,showRows:3}),r.a.createElement(Te,{menu:e.eventMenu}),r.a.createElement("h3",null,e.eventAttendees&&e.eventAttendees.length>0?e.messages.hasAttendees:""),e.eventAttendees&&e.eventAttendees.length>0&&r.a.createElement(Le,{attendees:e.eventAttendees,currOccurrance:e.selectedOccurance}),r.a.createElement("div",{className:"reviews-title-wrapper"},r.a.createElement("h3",{id:"reviews"},"Reviews"),r.a.createElement("label",{title:"Add a Review",onClick:this.onToggleReviewForm},r.a.createElement("i",{className:"icon-large far fa-plus-square"}))),r.a.createElement("div",{className:this.state.displayReviewForm},r.a.createElement(Be,{onSaveReviewForm:this.onSaveReviewForm})),e.hostReviews&&r.a.createElement(qe,{reviews:e.hostReviews}),r.a.createElement("div",{className:"container google-map-container"},r.a.createElement("h3",{id:"location"},"Location"),r.a.createElement(We,{location:e.location}))),r.a.createElement("div",{className:"right-box "},r.a.createElement(Se,{meal:e,onEventRegistration:this.onEventRegistration,onChangeDate:this.onChangeDate})))))}return r.a.createElement("div",{className:"border-loading-indicator col-2 row-1"})}}]),t}(n.Component),Je={getMeal:Oe,add:U,updateMeal:Ne,changeSelectedOccurrance:we},Ke=Object(l.b)((function(e){return{loggedInUser:e.user.loggedInUser,displayedMeal:e.occurrance.displayedMeal}}),Je)(ze),Ve=(a(342),a(249)),Xe=a.n(Ve),Qe=(a(425),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onClickRow=function(e,t){e.stopPropagation(),a.props.history.push("/meal/".concat(a.props.meal._id))},a.onEditClick=function(e){e.stopPropagation(),a.props.history.push("/meal/edit/".concat(a.props.meal._id))},a.onDelete=function(e){e.stopPropagation();var t=a.props.match.params.id,n=a.props.meal._id,r=a.props.meal.occurensId;a.props.onDelete(t,n,r)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.meal.occurrences;if(this.props.meal.isHosted)return r.a.createElement(r.a.Fragment,null,t&&t.map((function(a){var n=new Date(a.date).toLocaleDateString();return r.a.createElement("div",{key:"Key"+t.id,className:"tab-content "},r.a.createElement("div",{className:" "},r.a.createElement("ul",{className:"host-list flex space-around clean-list"},r.a.createElement("li",null,r.a.createElement("span",null,"Date: "),r.a.createElement("span",null,n)),r.a.createElement("li",null,r.a.createElement("span",null,"Total Guests:"),r.a.createElement("span",null," ",e.props.meal.capacity)),r.a.createElement("li",null,r.a.createElement("span",null,"Registered Guests:")," ",r.a.createElement("span",null,a.total)),r.a.createElement("li",null,r.a.createElement("span",null,"Revenue:")," ",r.a.createElement("span",null,a.total*e.props.meal.price," ")),r.a.createElement("li",null,r.a.createElement("span",null,"Commission:")," ",r.a.createElement("span",null," ",a.total*e.props.meal.price*.1)),r.a.createElement("li",null,r.a.createElement("span",null," ",r.a.createElement(Xe.a,{className:" cursor",onClick:e.onEditClick})," ")))))})));var a=new Date(this.props.meal.date).toLocaleDateString();return!this.props.meal.isHosted&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tab-content cursor ",onClick:this.onClickRow,title:"Click me to see event"},r.a.createElement("ul",{className:"guest-list clean-list"},r.a.createElement("ul",{className:"clean-list flex space-between  "},r.a.createElement("li",null,r.a.createElement("span",null,"Hosted By:")," ",r.a.createElement("span",null,this.props.meal.hostedBy.fullName)),r.a.createElement("li",null,r.a.createElement("span",null,"Date: "),r.a.createElement("span",null,a)),r.a.createElement("li",null,r.a.createElement("span",{onClick:this.onDelete,title:"delete me from event"},"\ud83d\uddd1\ufe0f"))),r.a.createElement("ul",{className:"clean-list flex justify-start"},r.a.createElement("li",null,r.a.createElement("span",null,"Location: ")," ",r.a.createElement("span",null,this.props.meal.location.address))),r.a.createElement("ul",{className:"clean-list flex align-start space-between"},r.a.createElement("li",null,r.a.createElement("span",null,"Cuisine: ")," ",r.a.createElement("span",null,this.props.meal.cuisineType)),r.a.createElement("li",null,r.a.createElement("span",null,"Meal: ")," ",r.a.createElement("span",null,this.props.meal.mealType)),r.a.createElement("li",null,r.a.createElement("span",null,"My Guests:")," ",r.a.createElement("span",null,this.props.meal.total)),r.a.createElement("li",null,r.a.createElement("span",null,"Total Price: ")," ",r.a.createElement("span",null,"$",this.props.meal.price*this.props.meal.total," "),r.a.createElement("small",null,"($",this.props.meal.price," per guest)"))))))}}]),t}(n.Component)),Ze=Object(d.f)(Qe);function et(e){var t=e.meals,a=e.userId,n=e.onDelete;return r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"col container "},t&&t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",{className:"preview-title "}," ",r.a.createElement("span",null,e.isHosted?"I Am Hosting":"I Am A Guest"," ")),r.a.createElement("div",{className:"tabs-container "},r.a.createElement("div",{className:"tab"},r.a.createElement("input",{className:"checkbox-arrow",type:"checkbox",id:"chck".concat(t)}),r.a.createElement("label",{className:"tab-label",htmlFor:"chck".concat(t)},e.title),r.a.createElement(Ze,{onDelete:n,meal:e,userId:a}))))}))))}var tt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).resetFilterDefinitions=function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(a.props.setFilter({userId:a.props.match.params.id,at:"",type:"",location:{city:"",country:""},tags:""}));case 2:a.loadMeals();case 3:case"end":return e.stop()}}))},a.loadMeals=function(){a.props.loadUserMeal(a.props.filter)},a.onCreateMeal=function(){a.props.history.push("/meal/edit")},a.mealsToShow=function(){var e,t,n,r;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=a.props.match.params.id,t=[],n=[],r=[],r=Object(z.a)(a.props.userMeals),s.next=7,f.a.awrap(r.forEach((function(a){return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.hostedBy._id!==e){r.next=5;break}return r.next=3,f.a.awrap(n.push(a));case 3:r.next=7;break;case 5:return r.next=7,f.a.awrap(t.push(a));case 7:case"end":return r.stop()}}))})));case 7:return s.abrupt("return",{host:n,attended:t});case 8:case"end":return s.stop()}}))},a.onDelete=function(e,t,n){var r,s,c;return f.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,f.a.awrap(a.props.getById(t));case 2:r=Object(v.a)({},a.props.meal),s=r.occurrences.find((function(e){return e.id===n})),c=s.attendees.findIndex((function(t){return t._id===e})),s.attendees.splice(c,1),a.loadMeals();case 7:case"end":return l.stop()}}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.resetFilterDefinitions();case 1:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this.props.loggedInUser;return e?e&&r.a.createElement("div",{className:"container user-details-container "},r.a.createElement("div",{className:" user-container"},r.a.createElement("span",null,"Hello, "),r.a.createElement("span",null,e.fullName)),r.a.createElement("div",{className:"controlls-container flex space-between "},r.a.createElement("div",{className:"flex-shrink-50"},r.a.createElement("span",null,"Events ")),r.a.createElement("div",{className:"flex-shrink-50 flex justify-end"},r.a.createElement("button",{className:"btn-sm-md btn-action align-end ",onClick:this.onCreateMeal},"Create Event"))),this.props.userMeals.length>0&&r.a.createElement(et,{onDelete:this.onDelete,meals:this.props.userMeals,userId:e._id})):null}}]),t}(n.Component),at={loadUserMeal:I,setFilter:P,add:U,load:k,getById:L},nt=Object(l.b)((function(e){return{userMeals:e.meal.userMeals,meals:e.meal.meals,filter:e.filter.filter,meal:e.meal.selectedMeal,loggedInUser:e.user.loggedInUser}}),at)(tt),rt={uploadImages:function(e){var t,a,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:t=[],a=0;case 2:if(!(a<e.length)){r.next=10;break}return r.next=5,f.a.awrap(st(e[a]));case 5:n=r.sent,t.push(n.url);case 7:a++,r.next=2;break;case 10:return r.abrupt("return",t);case 11:case"end":return r.stop()}}))},getLatLngFromAddress:function(e){return e=e.replace(/ /g,"+"),b.a.get("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(e,"&key=AIzaSyAlRYsJRB1drgRGQVcSCbwcWhRpcaM7Z08")).then((function(e){return{lat:e.data.results[0].geometry.location.lat,lng:e.data.results[0].geometry.location.lng,address:e.data.results[0].formatted_address}}))}};function st(e){var t="https://api.cloudinary.com/v1_1/".concat("due4sgv19","/image/upload"),a=new FormData;return a.append("file",e),a.append("upload_preset","ldwisjpq"),fetch(t,{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)}))}var ct=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={files:[],displayed:[],drag:!1,msgState:"Drop Here",fileArray:[]},a.fileObj=[],a.dropRef=r.a.createRef(),a.handleDrag=function(e){e.preventDefault(),e.stopPropagation()},a.handleDragIn=function(e){e.preventDefault(),e.stopPropagation(),a.dragCounter++,e.dataTransfer.files&&e.dataTransfer.files.length>0&&a.setState({drag:!0})},a.handleDragOut=function(e){e.preventDefault(),e.stopPropagation(),a.dragCounter--,0===a.dragCounter&&a.setState({drag:!1})},a.handleDrop=function(e){e.preventDefault(),e.stopPropagation(),a.setState({drag:!1}),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(a.setPreviewImages(e.dataTransfer.files),a.props.handleImageUpload(e.dataTransfer.files),e.dataTransfer.clearData(),a.dragCounter=0)},a.checkExistingImages=function(e){return a.state.fileArray.length>0&&(a.props.handleImageUpload(e.target.files),!0)},a.handleChange=function(e){e.preventDefault(),e.stopPropagation(),a.checkExistingImages(e)||(a.setPreviewImages(e.target.files),a.props.handleImageUpload(e.target.files))},a.setPreviewImages=function(e){var t=a.state.fileArray;a.fileObj.push(e);for(var n=0;n<a.fileObj[0].length;n++)t.push(URL.createObjectURL(a.fileObj[0][n]));a.setState({files:t}),a.setState({fileArray:t})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop)}},{key:"componentWillUnmount",value:function(){var e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)}},{key:"componentDidUpdate",value:function(e){e.files!==this.props.files&&this.setState({fileArray:Object(z.a)(this.props.files)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"upload-container",ref:this.dropRef},r.a.createElement("div",{className:"left-box"},r.a.createElement("div",{className:"dropzone-wrapper"},r.a.createElement("div",{className:"dropzone-desc"},r.a.createElement("i",{className:"glyphicon glyphicon-download-alt"}),r.a.createElement("p",null,"Choose an image file or drag it here.")),r.a.createElement("input",{type:"file",id:"file-upload",name:"img_logo",className:"dropzone",multiple:!0,accept:"image/*",onChange:this.handleChange}))),r.a.createElement("div",{className:"right-box"},r.a.createElement("div",{className:"preview-zone hidden"},r.a.createElement("div",{className:"box box-solid"},r.a.createElement("div",{className:"box-header with-border"}),r.a.createElement("div",{className:"box-body"},(this.state.fileArray||[]).map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("img",{src:t,className:"preview-image",alt:"..."}),r.a.createElement("i",{className:"far fa-times-circle icon-large",onClick:function(n){return e.props.onImgRemoval(n,t,a)}}))})))))))}}]),t}(n.Component),lt=a(477),it=a(227),ot=a(233),ut=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(lt.a,{row:!0},r.a.createElement(it.a,{control:r.a.createElement(ot.a,{checked:this.props.isPromoted,onClick:this.props.handleChange,value:"checked",color:"primary",name:"isPromoted"}),label:this.props.label}))}}]),t}(n.Component),mt=1,pt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={_id:"",hostedBy:{_id:0,fullName:"",imgUrl:""},title:"",description:"",firstCourse:[],mainCourse:[],desserts:[],beverages:[],cuisineType:"",mealType:"",price:0,occurrences:[],capacity:0,address:"",city:"",country:"",lat:"",lng:"",imgUrls:[],firstCourseTmp:"",mainCourseTmp:"",dessertTmp:"",drinkTmp:"",reviews:[],currency:"USD",tags:[],isActive:!0,isPromoted:!1,isBtnEnabled:!0},a.handleImageUpload=function(e){var t,n,r,s;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:t=0;case 1:if(!(t<e.length)){c.next=11;break}if(!(e[t].size>5e6)){c.next=6;break}return c.abrupt("return");case 6:if(e[t].type.includes("jpeg")||e[t].type.includes("jpg")||e[t].type.includes("png")){c.next=8;break}return c.abrupt("return");case 8:t++,c.next=1;break;case 11:return a.setState({isBtnEnabled:!1}),c.next=14,f.a.awrap(rt.uploadImages(e));case 14:n=c.sent,r=a.state.imgUrls,s=r.concat(n),a.setState({imgUrls:s},a.enableBtn);case 18:case"end":return c.stop()}}))},a.enableBtn=function(){a.setState({isBtnEnabled:!0})},a.onHandleChange=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;"isPromoted"===t&&(n=!a.state.isPromoted),a.setState(Object(Ue.a)({},t,n))},a.onHandleDateAdd=function(e){e.preventDefault();e.target.name;var t=e.target.value;if(""!==t){var n={id:mt+=1,date:Date.parse(t),attendees:[],total:0};a.setState((function(e){return{occurrences:[].concat(Object(z.a)(e.occurrences),[n])}}))}},a.onHandleAddMenuItem=function(e){e.preventDefault();var t=e.target.name,n=e.target.value,r="";switch(t){case"firstCourse":r="firstCourseTmp";break;case"mainCourse":r="mainCourseTmp";break;case"desserts":r="dessertTmp";break;default:r="drinkTmp"}n&&a.setState(Object(Ue.a)({},r,n))},a.setTags=function(){var e=[];e.push(a.state.cuisineType),e.push(a.state.mealType),e.push(a.state.title),e.push(a.state.price),e.push(a.state.city),e.push(a.state.country),e.push(a.state.address),e.push(a.state.hostedBy.fullName),e.push(a.state.description),e=(e=(e=(e=e.concat(a.state.firstCourse)).concat(a.state.mainCourse)).concat(a.state.desserts)).concat(a.state.beverages),a.state.occurrences.forEach((function(t){var a=new Date(t.date).toLocaleDateString();e.push(a)})),a.setState({tags:e})},a.isFormComplete=function(){var e=a.state;return e.address&&e.country&&e.city&&e.cuisineType&&e.mealType&&e.title&&e.price&&e.description&&e.firstCourse&&e.mainCourse&&e.desserts&&e.beverages&&e.capacity&&e.imgUrls},a.onSaveMeal=function(e){var t,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.preventDefault(),!a.isFormComplete()){r.next=9;break}return r.next=4,f.a.awrap(rt.getLatLngFromAddress(a.state.address+", "+a.state.city+", "+a.state.country));case 4:t=r.sent,a.setTags(),n={_id:a.state._id,isActive:!0,isPromoted:a.state.isPromoted,hostedBy:a.state.hostedBy,menu:{firstCourse:a.state.firstCourse,mainCourse:a.state.mainCourse,desserts:a.state.desserts,beverages:a.state.beverages},location:{city:a.state.city,country:a.state.country,address:a.state.address,lat:t.lat,lng:t.lng},imgUrls:a.state.imgUrls,title:a.state.title,description:a.state.description,cuisineType:a.state.cuisineType,mealType:a.state.mealType,price:a.state.price,occurrences:a.state.occurrences,capacity:a.state.capacity,reviews:a.state.reviews,currency:a.state.currency,tags:a.state.tags},a.props.meal||delete n._id,a.props.onSaveMeal(n);case 9:case"end":return r.stop()}}))},a.handleDateRemoval=function(e,t){var n=Object(z.a)(e);n.splice(t,1),a.setState(Object(v.a)({},a.state,{occurrences:n}))},a.handleMenuItemRemoval=function(e,t,n){var r;switch(e.target.nodeName){case"I":r=e.target.classList[0];break;default:r=e.target.name}var s=Object(z.a)(t);s.splice(n,1),a.setState(Object(Ue.a)({},r,s))},a.onAddMenuItem=function(e){var t,n;switch(e.preventDefault(),e.target.nodeName){case"I":t=e.target.parentNode.name;break;default:t=e.target.name}switch(t){case"firstCourse":n=a.state.firstCourseTmp,a.setState({firstCourseTmp:""});break;case"mainCourse":n=a.state.mainCourseTmp,a.setState({mainCourseTmp:""});break;case"desserts":n=a.state.dessertTmp,a.setState({dessertTmp:""});break;default:n=a.state.drinkTmp,a.setState({drinkTmp:""})}if(n){var r=a.state[t],s=Object(z.a)(r);s.push(n),a.setState(Object(Ue.a)({},t,s))}},a.onImgRemoval=function(e,t,n){var r=Object(z.a)(a.state.imgUrls);r.splice(n,1),a.setState({imgUrls:r})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){if(this.props.meal){var e=this.props.meal;this.setState({hostedBy:Object(v.a)({},e.hostedBy),_id:e._id,isActive:e.isActive,isPromoted:e.isPromoted,tags:Object(z.a)(e.tags),title:e.title,description:e.description,firstCourse:Object(z.a)(e.menu.firstCourse),mainCourse:Object(z.a)(e.menu.mainCourse),desserts:Object(z.a)(e.menu.desserts),beverages:Object(z.a)(e.menu.beverages),cuisineType:e.cuisineType,mealType:e.mealType,price:e.price,capacity:e.capacity,occurrences:Object(z.a)(e.occurrences),address:e.location.address,city:e.location.city,country:e.location.country,lat:e.location.lat,lng:e.location.lng,reviews:Object(z.a)(e.reviews),imgUrls:Object(z.a)(e.imgUrls)})}else this.setState({hostedBy:{_id:this.props.loggedInUser._id,fullName:this.props.loggedInUser.fullName,imgUrl:this.props.loggedInUser.imgUrl}})}},{key:"componentDidUpdate",value:function(e){if(JSON.stringify(e.meal)!==JSON.stringify(this.props.meal)&&this.props.meal){var t=this.props.meal;this.setState({hostedBy:Object(v.a)({},t.hostedBy),_id:t._id,isActive:t.isActive,isPromoted:t.isPromoted,tags:Object(z.a)(t.tags),title:t.title,description:t.description,firstCourse:Object(z.a)(t.menu.firstCourse),mainCourse:Object(z.a)(t.menu.mainCourse),desserts:Object(z.a)(t.menu.desserts),beverages:Object(z.a)(t.menu.beverages),cuisineType:t.cuisineType,mealType:t.mealType,price:t.price,capacity:t.capacity,occurrences:Object(z.a)(t.occurrences),address:t.location.address,city:t.location.city,country:t.location.country,lat:t.location.lat,lng:t.location.lng,reviews:Object(z.a)(t.reviews),imgUrls:Object(z.a)(t.imgUrls)})}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{className:"",onSubmit:this.onSaveMeal},r.a.createElement("div",{className:"image-container"},r.a.createElement("h4",null,"Images"),r.a.createElement(ct,{onImgRemoval:this.onImgRemoval,handleImageUpload:this.handleImageUpload,files:this.state.imgUrls})),r.a.createElement("div",{className:"event-info-container"},r.a.createElement("h4",null,"Details"),r.a.createElement("div",{className:"card-bottom-border flex column"},r.a.createElement("div",{className:"title"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",placeholder:"Event Name",id:"title",name:"title",value:this.state.title,onChange:this.onHandleChange,className:"input-form",required:!0})),r.a.createElement("div",{className:"description"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{id:"description",name:"description",value:this.state.description,placeholder:"Description",onChange:this.onHandleChange,className:"textarea-form",required:!0})),r.a.createElement("div",{className:"cuisineType"},r.a.createElement("label",{htmlFor:"cuisineType"},"Cuisine"),r.a.createElement("input",{type:"text",placeholder:"Cuisine",name:"cuisineType",id:"cuisineType",value:this.state.cuisineType,onChange:this.onHandleChange,className:"input-form",required:!0})),r.a.createElement("div",{className:"mealType"},r.a.createElement("label",{htmlFor:"mealType"},"Meal"),r.a.createElement("input",{type:"text",placeholder:"Dinner | Lunch | Breakfest",name:"mealType",id:"mealType",value:this.state.mealType,onChange:this.onHandleChange,className:"input-form",required:!0})),r.a.createElement("div",{className:"flex row flex space-between"},r.a.createElement("div",{className:"address flex-basis-1 margin-right-10"},r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement("input",{type:"text",placeholder:"Address",name:"address",id:"address",value:this.state.address,onChange:this.onHandleChange,className:"input-form",required:!0})),r.a.createElement("div",{className:"state flex-basis-1 margin-right-10"},r.a.createElement("label",{htmlFor:"state"},"Country"),r.a.createElement("input",{type:"text",placeholder:"State",name:"country",id:"country",value:this.state.country,onChange:this.onHandleChange,className:"input-form",required:!0})),r.a.createElement("div",{className:"city flex-basis-1"},r.a.createElement("label",{htmlFor:"city"},"City"),r.a.createElement("input",{type:"text",placeholder:"City",name:"city",id:"city",value:this.state.city,onChange:this.onHandleChange,className:"input-form",required:!0}))),r.a.createElement("div",{className:"price-capacity flex"},r.a.createElement("div",{className:"price flex-basis-1 margin-right-20"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("input",{type:"text",placeholder:"Price",id:"price",name:"price",value:this.state.price,onChange:this.onHandleChange,className:"input-form",required:!0})),r.a.createElement("div",{className:"capacity flex-basis-1"},r.a.createElement("label",{htmlFor:"capacity"},"How many people"),r.a.createElement("input",{type:"number",placeholder:"Capacity",id:"capacity",name:"capacity",value:this.state.capacity,onChange:this.onHandleChange,className:"input-form",required:!0}))),r.a.createElement("div",{className:"flex row flex space-even"},r.a.createElement("div",{className:"date flex-basis-1 margin-right-20"},r.a.createElement("div",{className:"flex align-center"},r.a.createElement("div",{className:"flex column margin-right-20 width-50"},r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement("input",Object(Ue.a)({className:"input-date",type:"date",name:"date",placeholder:"Date",id:"date",onChange:this.onHandleDateAdd,value:this.state.occurences},"className","input-date"))),r.a.createElement("div",{className:"promotion flex-basis-1"},r.a.createElement(ut,{label:"Would you like to promote your event?",handleChange:this.onHandleChange,isPromoted:this.state.isPromoted}))),r.a.createElement("div",{className:"width-50"},this.state.occurrences&&r.a.createElement("div",null,r.a.createElement("ul",{className:"clean-list occurrence-list"}," ",this.state.occurrences.map((function(t,a){var n=new Date(t.date).toLocaleDateString();return r.a.createElement("li",{className:"occurrence-date",key:a},n,r.a.createElement("span",null,r.a.createElement("i",{className:"far fa-times-circle icon-small",onClick:function(){return e.handleDateRemoval(e.state.occurrences,a)}})))}))))))))),r.a.createElement("div",{className:"event-menu-container"},r.a.createElement("h4",null,"Menu"),r.a.createElement("div",{className:"card-bottom-border menu-main-container flex column align-center justify-center"},r.a.createElement("div",{className:"menu-container"},r.a.createElement("div",{className:"card-title menu-section flex column"},r.a.createElement("h3",null,"First Course"),r.a.createElement("div",{className:"course-title-wrapper flex justify-center"},r.a.createElement("div",{className:"menu-item"},r.a.createElement("input",{type:"text",placeholder:"First course dish",name:"firstCourse",value:this.state.firstCourseTmp,className:"input-form",onChange:this.onHandleAddMenuItem,required:!0}),this.state.firstCourse&&r.a.createElement("div",null,r.a.createElement("ul",{className:"clean-list "}," ",this.state.firstCourse.map((function(t,a){return r.a.createElement("li",{className:"menu-list-courses",name:"firstCourse",key:a},t,r.a.createElement("i",{className:"firstCourse far fa-times-circle icon-small",name:"firstCourse",onClick:function(t){return e.handleMenuItemRemoval(t,e.state.firstCourse,a)}}))}))))),r.a.createElement("a",{name:"firstCourse",className:"",title:"Add new menu item",href:"#",onClick:this.onAddMenuItem,required:!0},r.a.createElement("i",{name:"firstCourse",className:"icon-larger fas fa-plus-square"})))),r.a.createElement("div",{className:"card-title menu-section flex column"},r.a.createElement("h3",null,"Main Course"),r.a.createElement("div",{className:"course-title-wrapper flex justify-center"},r.a.createElement("div",{className:"menu-item"},r.a.createElement("input",{type:"text",placeholder:"Main course dish",name:"mainCourse",value:this.state.mainCourseTmp,className:"input-form",onChange:this.onHandleAddMenuItem,required:!0}),this.state.mainCourse&&r.a.createElement("div",null,r.a.createElement("ul",{className:"clean-list "}," ",this.state.mainCourse.map((function(t,a){return r.a.createElement("li",{className:"menu-list-courses",name:"mainCourse",key:a},t,r.a.createElement("i",{className:"mainCourse far fa-times-circle icon-small",name:"mainCourse",onClick:function(t){return e.handleMenuItemRemoval(t,e.state.mainCourse,a)}}))}))))),r.a.createElement("a",{name:"mainCourse",className:"",title:"Add new menu item",href:"",onClick:this.onAddMenuItem},r.a.createElement("i",{name:"mainCourse",className:"icon-larger fas fa-plus-square"})))),r.a.createElement("div",{className:"card-title menu-section flex column"},r.a.createElement("h3",null,"Dessert"),r.a.createElement("div",{className:"course-title-wrapper flex justify-center"},r.a.createElement("div",{className:"menu-item"},r.a.createElement("input",{type:"text",placeholder:"Dessert",name:"desserts",className:"input-form",value:this.state.dessertTmp,onChange:this.onHandleAddMenuItem,required:!0}),this.state.desserts&&r.a.createElement("div",null,r.a.createElement("ul",{className:"clean-list "}," ",this.state.desserts.map((function(t,a){return r.a.createElement("li",{className:"menu-list-courses",name:"desserts",key:a},t,r.a.createElement("i",{className:"desserts far fa-times-circle icon-small",name:"desserts",onClick:function(t){return e.handleMenuItemRemoval(t,e.state.desserts,a)}}))}))))),r.a.createElement("a",{name:"desserts",className:"",title:"Add new menu item",href:"",onClick:this.onAddMenuItem},r.a.createElement("i",{name:"desserts",className:"icon-larger fas fa-plus-square"})))),r.a.createElement("div",{className:"card-title menu-section flex column"},r.a.createElement("h3",null,"Beverage"),r.a.createElement("div",{className:"course-title-wrapper flex justify-center"},r.a.createElement("div",{className:"menu-item"},r.a.createElement("input",{type:"text",placeholder:"Beverage",name:"beverages",className:"input-form",value:this.state.drinkTmp,onChange:this.onHandleAddMenuItem,required:!0}),this.state.beverages&&r.a.createElement("div",null,r.a.createElement("ul",{className:"clean-list "},this.state.beverages.map((function(t,a){return r.a.createElement("li",{className:"menu-list-courses",name:"beverages",key:a},t,r.a.createElement("i",{className:"beverages far fa-times-circle icon-small",name:"beverages",onClick:function(t){return e.handleMenuItemRemoval(t,e.state.beverages,a)}}))}))))),r.a.createElement("a",{name:"beverages",className:"",title:"Add new menu item",href:"",onClick:this.onAddMenuItem},r.a.createElement("i",{name:"beverages",className:"icon-larger fas fa-plus-square"}))))))),r.a.createElement("div",{className:"save"},r.a.createElement("button",{className:"button btn-lg btn-main",onClick:this.onSaveMeal,disabled:!this.state.isBtnEnabled},"SAVE"))))}}]),t}(n.Component),dt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onSaveMeal=function(e){var t,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=a.props.loggedInUser,n=Object(v.a)({},e),r.next=4,f.a.awrap(a.props.add(n));case 4:a.props.history.push("/user/".concat(t._id));case 5:case"end":return r.stop()}}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.props.match.params.id)){t.next=4;break}return t.next=4,f.a.awrap(this.props.getById(e));case 4:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this.props.loggedInUser,t=this.props.match.params.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container main-form-container"},r.a.createElement("h2",null,"Event"),(t&&this.props.meal||!t)&&r.a.createElement(pt,{loggedInUser:e,onSaveMeal:this.onSaveMeal,meal:t?this.props.meal:""})))}}]),t}(n.Component),ht={getById:L,add:U},gt=Object(l.b)((function(e){return{loggedInUser:e.user.loggedInUser,meal:e.meal.selectedMeal}}),ht)(dt),ft=a(480),vt=a(478),yt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0,vertical:"top",horizontal:"center",width:"20%",style:{backgroundColor:"#c0c0c0",marginTop:"138px"}},a.handleClick=function(e){a.setState(Object(v.a)({open:!0},e))},a.handleClose=function(){a.setState(Object(v.a)({},a.state,{open:!1}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.updateOpenState()}},{key:"componentDidUpdate",value:function(e){}},{key:"updateOpenState",value:function(){this.setState(Object(v.a)({},this.state,{open:this.props.open}))}},{key:"render",value:function(){var e=this.state,t=e.vertical,a=e.horizontal,n=e.open;return r.a.createElement("div",null,r.a.createElement(ft.a,{anchorOrigin:{vertical:t,horizontal:a},key:"".concat(t,",").concat(a),open:n,onClose:this.handleClose},r.a.createElement(vt.a,{style:this.state.style,message:this.props.msg})))}}]),t}(n.Component),Et=Object(l.b)((function(e){return{}}),{})(yt);function bt(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function Ot(){return sessionStorage.getItem("user")}var wt={login:function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(N("".concat("auth","/login"),e));case 2:return t=a.sent,a.abrupt("return",bt(t));case 4:case"end":return a.stop()}}))},signup:function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(N("".concat("auth","/signup"),e));case 2:return t=a.sent,a.abrupt("return",bt(t));case 4:case"end":return a.stop()}}))},logout:function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(N("".concat("auth","/logout")));case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}))},getById:function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(w("".concat("user","/").concat(e)));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},checkConnection:function(){return!!Ot()},getUserLoggedIn:Ot};function Nt(e){return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(wt.login(e));case 2:a=n.sent,t(Ct(a));case 4:case"end":return n.stop()}}))}}function xt(e){return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(wt.signup(e));case 2:a=n.sent,t(kt(a));case 4:case"end":return n.stop()}}))}}function jt(){return function(e){return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.awrap(wt.logout());case 2:e(Ct(null));case 3:case"end":return t.stop()}}))}}function Ct(e){return{type:"SET",user:e}}function kt(e){return{type:"ADD",user:e}}function Mt(e){return e&&r.a.createElement("div",{className:"msg-notification-container clean-list"},r.a.createElement("div",{className:"notification-img"},r.a.createElement("img",{className:"user-img-profile",src:e.user.imgUrl})),r.a.createElement("div",{className:"user-info-notification"},r.a.createElement("span",null,"Just now"),r.a.createElement("span",null," ",e.user.fullName),r.a.createElement("span",null,"has just signed-in to your event"),r.a.createElement("span",null,e.user.titelHost)))}var It=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={showNotification:!1,registeredUser:{}},a.signToSocketEvent=function(e){B.setup(),B.emit("newChannel","onEventRegistration".concat(e)),B.on("addMsg",a.addMsg)},a.addMsg=function(e){console.log("Header -> ",e),a.setState({showNotification:!0,registeredUser:e.loggedInUser}),setTimeout(a.resetNotification,8e3)},a.resetNotification=function(){a.setState({showNotification:!1,registeredUser:""})},a.unSignToSocketEvent=function(){B.off("addMsg",a.addMsg),B.terminate()},a.onLogout=function(e){e.preventDefault(),a.props.logout(),a.unSignToSocketEvent(),a.props.history.push("/")},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.loggedInUser?this.signToSocketEvent(this.props.loggedInUser._id):(this.loginAsGuest(),this.signToSocketEvent("5e4810c4793b07597058e829"))}},{key:"loginAsGuest",value:function(){this.props.login({email:"guest@gmail.com",password:"guest"})}},{key:"componentDidUpdate",value:function(e){e.loggedInUser!==this.props.loggedInUser&&this.props.loggedInUser&&this.signToSocketEvent(this.props.loggedInUser._id)}},{key:"componentWillUnmount",value:function(){this.unSignToSocketEvent()}},{key:"render",value:function(){return[this.state.showNotification&&r.a.createElement(Et,{key:1,open:!0,msg:r.a.createElement(Mt,{user:this.state.registeredUser})}),r.a.createElement("div",{key:2,className:"main-header-container flex align-center space-between"},r.a.createElement("div",{className:"container logo flex-basis-60 "},r.a.createElement($.a,{to:"/"},r.a.createElement("span",null,"umami"))),r.a.createElement("div",{className:"nav-container container flex-basis-30 flex justify-end"},r.a.createElement("div",{className:"controls flex-basis-1 flex row align-center justify-end"},r.a.createElement("div",{className:"margin-right-10"}),this.props.loggedInUser&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"logged-user-container"},r.a.createElement($.a,{className:"",to:"/user/".concat(this.props.loggedInUser._id)},r.a.createElement("img",{style:{width:"60px",height:"60px"},src:"https://res.cloudinary.com/contentexs/image/upload/v1580171634/user-round.svg",alt:""}))),r.a.createElement("span",null,"|"),r.a.createElement("div",null,r.a.createElement("a",{href:"",onClick:this.onLogout},"logout"))),!this.props.loggedInUser&&r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{className:"",to:"/user/login"},"login")))))]}}]),t}(n.Component),St={logout:jt,addMsg:_e,login:Nt},Dt=Object(d.f)(Object(l.b)((function(e){return{loggedInUser:e.user.loggedInUser,msg:e.socket.msg}}),St)(It));function Tt(){return r.a.createElement("div",{className:"footer-container  "},r.a.createElement("div",{className:"footer-logo container flex column align-center justify-center"},r.a.createElement("h3",null,"umami"),r.a.createElement("small",null,"\xa9 2019 umami - All Rights Reserved")))}a(427);var At=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={modalIsOpen:!1,fullName:"",username:"",password:"",email:"",phone:"",imgUrl:""},a.changeInput=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(Ue.a)({},t,n))},a.onSignup=function(){var e=a.state;delete e.modalIsOpen,e.fullName&&e.username&&e.password&&e.email&&e.phone&&e.imgUrl&&a.props.signup(e)},a.onCheckForm=function(e){"Enter"===e.key&&a.onSignup()},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("a",{onClick:this.openModal},"signup"),r.a.createElement("div",{className:"log-in",onKeyUp:function(t){return e.onCheckForm(t)}},r.a.createElement("input",{type:"text",className:"margin-top-10",placeholder:"Full Name",onChange:this.changeInput,name:"fullName"}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"margin-top-10",placeholder:"User Name",onChange:this.changeInput,name:"username"}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",className:"margin-top-10",placeholder:"Password",onChange:this.changeInput,name:"password"}),r.a.createElement("br",null),r.a.createElement("input",{type:"phone",className:"margin-top-10",placeholder:"Phone",onChange:this.changeInput,name:"phone"}),r.a.createElement("br",null),r.a.createElement("input",{type:"imgUrl",className:"margin-top-10",placeholder:"imgUrl",onChange:this.changeInput,name:"imgUrl"}),r.a.createElement("br",null),r.a.createElement("input",{type:"email",className:"margin-top-10",placeholder:"email",onChange:this.changeInput,name:"email"}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn-lg btn-action",onClick:this.onSignup},"sign-up")))}}]),t}(n.Component),Lt={signup:xt},Ut=Object(l.b)(null,Lt)(At),_t=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",isHide:!0},a.changeInput=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(Ue.a)({},t,n))},a.onLogInUser=function(){var e,t,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=a.state.email,t=a.state.password,n={email:e,password:t},!e||!t){r.next=7;break}return r.next=6,f.a.awrap(a.props.login(n));case 6:a.props.history.push("/");case 7:case"end":return r.stop()}}))},a.onCheckForm=function(e){"Enter"===e.key&&a.onLogInUser()},a.changeForm=function(){a.setState((function(e){return{isHide:!e.isHide}}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.isHide?"hide":"show-block",a=this.state.isHide?"show-block":"hide",n=this.state.isHide?"register":"login";return r.a.createElement("div",{className:"flex column align-center justify-center"},r.a.createElement("div",{className:a},r.a.createElement("div",null,"Log-in"),r.a.createElement("div",null,r.a.createElement("input",{name:"email",onChange:this.changeInput,value:this.state.email,type:"text",className:"login-input",placeholder:" email"})),r.a.createElement("div",{className:"margin-top-10"},r.a.createElement("input",{name:"password",onChange:this.changeInput,value:this.state.password,type:"password",className:"login-input",placeholder:" Password"})),r.a.createElement("div",{className:"margin-top-10 login-btns-warpper"},r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"btn-lg btn-action",onClick:this.onLogInUser},"Login")))),r.a.createElement("div",{className:t},r.a.createElement(Ut,null)),r.a.createElement("span",{className:"login-or-signup",onClick:this.changeForm,onKeyUp:function(t){return e.onCheckForm(t)}},"click ",r.a.createElement("span",{className:"cursor-pointer emphasized-login-text"},"here")," to ",n))}}]),t}(n.Component),Rt={login:Nt},Ft=Object(l.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),Rt)(_t),Bt=(a(436),a(437),Object(h.a)()),Pt=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{history:Bt},r.a.createElement(Dt,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{component:se,path:"/",exact:!0}),r.a.createElement(d.a,{component:gt,path:"/meal/edit/:id?"}),r.a.createElement(d.a,{component:ye,path:"/meal/location/:location?"}),r.a.createElement(d.a,{component:ye,path:"/meal/cuisine/:cuisine?"}),r.a.createElement(d.a,{component:ye,path:"/meal/results/:results?"}),r.a.createElement(d.a,{component:Ft,path:"/user/login",exact:!0}),r.a.createElement(d.a,{component:Ke,path:"/meal/:id",exact:!0}),r.a.createElement(d.a,{component:nt,path:"/user/:id",exact:!0})),r.a.createElement(Tt,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ht=a(47),qt=a(250),Yt={filter:{userId:"",at:"",type:"",location:{city:"",country:""},tags:""}};var Gt={meals:[],userMeals:[],selectedMeal:null,cities:[],cuisines:[],filteredMeal:null};var $t={createReducer:function(e,t){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(n.type)?t[n.type](a,n):a}},updateObject:function(e,t){return Object.assign({},e,t)},addItemToState:function(e,t){return[].concat(Object(z.a)(e),[t])},updateItemInState:function(e,t,a){return e.map((function(e){return e.id!==t?e:a(e)}))},removeItemFromState:function(e,t){return e.filter((function(e){return e.id!==t}))}};var Wt=null;sessionStorage.user&&(Wt=JSON.parse(sessionStorage.user));var zt={loggedInUser:Wt};var Jt=$t.createReducer(zt,{SET:function(e,t){return Object(v.a)({},e,{loggedInUser:t.user})},ADD:function(e,t){return Object(v.a)({},e,{loggedInUser:t.user})}}),Kt={isLoading:!1},Vt={msg:""};var Xt={displayedMeal:null};var Qt=Object(Ht.c)({system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(v.a)({},e,{isLoading:!0});case"LOADING_DONE":return Object(v.a)({},e,{isLoading:!1});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_FILTER":return Object(v.a)({},e,{filter:Object(v.a)({},t.filter)});default:return e}},meal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOAD_MEALS":return Object(v.a)({},e,{meals:t.meals});case"GET_MEAL_BY_ID":return Object(v.a)({},e,{selectedMeal:t.meal});case"ADD_MEAL":return Object(v.a)({},e,{meals:[].concat(Object(z.a)(e.meals),[t.meal]),selectedMeal:t.meal});case"UPDATE_MEAL":return Object(v.a)({},e,{meals:e.meals.map((function(e){return t.meal._id===e._id?t.meal:e})),selectedMeal:t.meal});case"REMOVE_MEAL":return Object(v.a)({},e,{meals:e.meals.filter((function(e){return e._id!==t.id}))});case"LOAD_CITIES":return Object(v.a)({},e,{cities:Object(z.a)(t.citiesToReducer)});case"LOAD_CUISINES":return Object(v.a)({},e,{cuisines:Object(z.a)(t.cuisineTypesToReducer)});case"LOAD_TAGS":return Object(v.a)({},e,{tags:Object(z.a)(t.tags)});case"LOAD_USER_MEAL":return Object(v.a)({},e,{userMeals:t.userMeals});case"LOAD_MEAL_FOR_REGISTRATION":return Object(v.a)({},e,{filteredMeal:t.filteredMeal});case"LOAD_HOME_MEALS":return Object(v.a)({},e,{homeMeals:t.meals});default:return e}},user:Jt,socket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"ADD_MSG":return Object(v.a)({},e,{msg:t.msg});default:return e}},occurrance:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOAD_DISPLAYED_MEAL":return{displayedMeal:Object(v.a)({},t.displayedMeal)};case"SET_SELECTED_OCCURRANCE":return{displayedMeal:Object(v.a)({},e.displayedMeal,{selectedOccurance:t.selectedOccurance})};default:return e}}}),Zt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ht.d,ea=Object(Ht.e)(Qt,Zt(Object(Ht.a)(qt.a)));c.a.render(r.a.createElement(l.a,{store:ea},r.a.createElement(Pt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[266,1,2]]]);
//# sourceMappingURL=main.f3dba346.chunk.js.map