(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{262:function(e,t,a){e.exports=a(430)},316:function(e,t){},428:function(e,t,a){},429:function(e,t,a){},430:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),c=a.n(s),i=a(24),l=a(11),o=a(10),u=a(12),m=a(13),p=a(14),d=a(30),h=a(38),g=a(6),f=a.n(g),v=a(18),y=Object(h.a)(),E=a(126),b=a.n(E),O=b.a.create({withCredentials:!0}),w=function(e,t,a){return j(e,"GET",t,a)},N=function(e,t,a){return j(e,"POST",t,a)},x=function(e,t,a){return j(e,"PUT",t,a)};function j(e){var t,a,n,r,s=arguments;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:"get",a=s.length>2&&void 0!==s[2]?s[2]:null,n=s.length>3&&void 0!==s[3]?s[3]:null,s.length>4?s[4]:void 0,c.prev=4,c.next=7,f.a.awrap(O({url:"".concat("/api/").concat(e),method:t,data:a,params:n}));case 7:return r=c.sent,c.abrupt("return",r.data);case 11:throw c.prev=11,c.t0=c.catch(4),console.log("Had Issues ".concat(t,"ing to the backend, endpoint: ").concat(e,", with data: ").concat(a,", with params: ").concat(n)),console.dir(c.t0),c.t0.response&&401===c.t0.response.status&&y.push("/"),c.t0;case 17:case"end":return c.stop()}}),null,null,[[4,11]])}var C={query:function(e,t,a){var n,r;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e?(n={userId:e.userId,at:e.at,type:e.type,tags:e.tags},e.location&&(n.city=e.location.city,n.country=e.location.country)):t?n=t.meals?{group:t._id,meals:t.meals.$push}:{group:t._id}:a&&(n={distinct:a._id}),s.next=3,f.a.awrap(w("meal",e,n));case 3:return r=s.sent,s.abrupt("return",r);case 5:case"end":return s.stop()}}))},getById:function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(w("".concat("meal","/").concat(e)));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},add:function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(N("".concat("meal"),e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},update:function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(x("".concat("meal","/").concat(e._id),e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},getMealForRegistration:function(e){var t=Object(v.a)({},e),a=Date.now(),n=[];return t.occurrences.forEach((function(e){e.total<t.capacity&&e.date>a&&n.push(e)})),t.occurrences=n,t}};function k(e){return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(C.query(e));case 2:a=n.sent,t({type:"LOAD",meals:a});case 4:case"end":return n.stop()}}))}}function I(e){return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(C.query(e));case 2:a=n.sent,t({type:"LOAD_USER_MEAL",userMeals:a});case 4:case"end":return n.stop()}}))}}function D(){var e={_id:"$location.city"};return function(t){var a,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.a.awrap(C.query(null,e));case 2:a=r.sent,n=a.map((function(e){return e._id})),t({type:"LOAD_CITIES",citiesToReducer:n});case 5:case"end":return r.stop()}}))}}function T(){var e={_id:"$location.city",meals:{$push:"$$ROOT"}};return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(C.query(null,e));case 2:a=n.sent,t({type:"LOAD",meals:a});case 4:case"end":return n.stop()}}))}}function S(){var e={_id:"$cuisineType",meals:{$push:"$$ROOT"}};return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(C.query(null,e));case 2:a=n.sent,t({type:"LOAD",meals:a});case 4:case"end":return n.stop()}}))}}function M(){var e={_id:"$cuisineType"};return function(t){var a,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.a.awrap(C.query(null,e));case 2:a=r.sent,n=a.map((function(e){return e._id})),t({type:"LOAD_CUISINES",cuisineTypesToReducer:n});case 5:case"end":return r.stop()}}))}}function A(e){return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(C.getById(e));case 2:a=n.sent,t({type:"GET_BY_ID",meal:a});case 4:case"end":return n.stop()}}))}}function U(e){var t=e._id?"UPDATE":"ADD";return"UPDATE"===t?function(a){var n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.a.awrap(C.update(e));case 2:n=r.sent,a({type:t,meal:n});case 4:case"end":return r.stop()}}))}:function(a){var n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.a.awrap(C.add(e));case 2:n=r.sent,a({type:t,meal:n});case 4:case"end":return r.stop()}}))}}var L,R=a(233),_=a.n(R),F={setup:function(){L=_()("/")},terminate:function(){L=null},on:function(e,t){L.on(e,t)},off:function(e,t){L.off(e,t)},emit:function(e,t){L.emit(e,t)}};function B(e){return function(t){return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(t(P(e)));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))}}function P(e){return{type:"SET_FILTER",filter:e}}var H=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={val:""},a.handleChange=function(e){return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:"Enter"!==e.key&&a.setState({val:e.target.value});case 1:case"end":return t.stop()}}))},a.onSearchAction=function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("Enter"!==e.key&&"click"!==e.type){n.next=5;break}return t=a.state.val,n.next=4,f.a.awrap(a.setState({val:""}));case 4:a.props.history.push("/meal/results/".concat(t));case 5:case"end":return n.stop()}}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-search-container container margin-top-20"},r.a.createElement("input",{className:"search-input",type:"text",placeholder:this.props.placeholder,value:this.state.val,onChange:this.handleChange,onKeyUp:this.onSearchAction}))}}]),t}(n.Component),q={setFilter:B},Y=Object(d.f)(Object(i.b)((function(e){return{filter:e.filter.filter}}),q)(H)),G=a(52),W=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.category?r.a.createElement(G.a,{to:"/meal/".concat(this.props.displayCategory.toLowerCase(),"/").concat(this.props.category.name)},r.a.createElement("div",{className:"category-card-sm flex column"},r.a.createElement("img",{src:this.props.category.imgUrl,alt:"category",className:"card-img"}),r.a.createElement("h5",{className:"card-name"},this.props.category.name))):r.a.createElement("div",null)}}]),t}(n.Component),$=a(19),z=a(50);function J(e,t){var a=new Date(Number(e));return a.setDate(e.getDate()+t),a}function K(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))}function V(e,t,a,n){var r=[];return"Cuisine"===t.type&&(r=e.variations.includes(n)?[].concat(Object($.a)(e.variations),[n]):e.variations),"Location"===t.type&&(r=e.variations.includes(a)?[].concat(Object($.a)(e.variations),[a]):e.variations),r}function X(e,t){var a="",n={default:"https://res.cloudinary.com/contentexs/image/upload/v1580324681/default-c.jpg","tex-mex":"https://res.cloudinary.com/contentexs/image/upload/v1580322135/tex-mex.jpg",asian:"https://res.cloudinary.com/contentexs/image/upload/v1580322135/asian.jpg",spanish:"https://res.cloudinary.com/contentexs/image/upload/v1580324681/barcelona.jpg",italian:"https://res.cloudinary.com/contentexs/image/upload/v1580322135/italian.jpg",greek:"https://res.cloudinary.com/contentexs/image/upload/v1580326079/greek.jpg",moroccan:"https://res.cloudinary.com/contentexs/image/upload/v1580322135/moroccan.jpg",indian:"https://res.cloudinary.com/contentexs/image/upload/v1580322135/indian.jpg"},r={default:"https://res.cloudinary.com/contentexs/image/upload/v1580322153/default.jpg",dallas:"https://res.cloudinary.com/contentexs/image/upload/v1580322153/dallas.jpg",barcelona:"https://res.cloudinary.com/contentexs/image/upload/v1580322153/barcelona.jpg",duino:"https://res.cloudinary.com/contentexs/image/upload/v1580322154/duino.jpg",athens:"https://res.cloudinary.com/contentexs/image/upload/v1580322153/athens.jpg",marrakech:"https://res.cloudinary.com/contentexs/image/upload/v1580322154/marrakech.jpg",delhi:"https://res.cloudinary.com/contentexs/image/upload/v1580322153/delhi.jpg",bangkok:"https://res.cloudinary.com/contentexs/image/upload/v1580322153/bangkok.jpg"};return"Cuisine"===e.type&&(a=n[t.toLowerCase()]?n[t.toLowerCase()]:n.default),"Location"===e.type&&(a=r[t.toLowerCase()]?r[t.toLowerCase()]:r.default),a}function Q(e){var t=new Date;return e.reduce((function(e,a){return e.date-t<a.date-t?e.date:a.date}),t)}function Z(e){return e.reduce((function(e,t){return e+parseInt(t.total)}),0)}function ee(e,t,a){return e.reduce((function(e,n){return n.date>t&&n.date<=a?e+=1:e}),0)}function te(e,t){return e.reduce((function(e,a){return a.date>t?e+=1:e}),0)}var ae={sortByDate:function(e,t){return new Date(e.date).getTime()>new Date(t.date).getTime()?1:-1},getCategoriesInfo:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,n=[],r="Cuisine"===t?{type:t,property:"cuisineType"}:{type:t,property:"location.city"},s=J(new Date,-1),c=J(s,9);if(e.forEach((function(e){var t=r.property.split(".").reduce((function(e,t){return e?e[t]:void 0}),e);if(t){var a=Q(e.occurrences),i=Z(e.occurrences);if(!(parseInt(i)<parseInt(e.capacity)&&a<new Date)){var l=ee(e.occurrences,s,c),o=te(e.occurrences,new Date),u=n.find((function(e){return e.name===t}));u?(u.nextAvailableDate={date:u.nextAvailableDate.date>a?K(a):K(u.nextAvailableDate.date),city:e.location.city,country:e.location.country,cuisine:e.cuisineType},u.variations=V(u,r,e.cuisineType,e.location.city),u.totalOccurrences+=parseInt(o),u.currentWeekOccurrences+=parseInt(l),u.totalEvents+=1,u.totalPrice+=parseFloat(e.price),u.priceAvg=Math.floor(parseFloat(u.totalPrice)/parseInt(u.totalEvents))):(u={name:t,nextAvailableDate:{date:K(a),city:e.location.city,country:e.location.country,cuisine:e.cuisineType},variations:"Cuisine"===r?[e.location.city]:[e.cuisineType],totalOccurrences:parseInt(o),currentWeekOccurrences:parseInt(l),totalEvents:1,totalPrice:parseFloat(e.price),priceAvg:Math.floor(parseFloat(e.price)),imgUrl:X(r,t)},n=[].concat(Object($.a)(n),[u]))}}})),0!=a)return n.slice(0,4)},getItemsInRange:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null===a?e.filter((function(e){return e.date>t})):e.filter((function(e){return e.date>t&&e.date<=a}))},findAllByKey:function e(t,a){return Object.entries(t).reduce((function(t,n){var r=Object(z.a)(n,2),s=r[0],c=r[1];return s===a?t.concat(c):"object"===typeof c?t.concat(e(c,a)):t}),[])},addDaysToDate:J,formatDate:K,getRandomInt:function(e){return Math.floor(Math.random()*Math.floor(e))},getTopEventsInfo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,a=Object($.a)(e),n=[];if(a.length>0)for(var r=a.length>=t?t:a.length,s=0;s<r;s++)n.push(a[s]);return n}},ne=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[];return t="location"==this.props.displayCategory.toLowerCase()?[{name:"Dallas",imgUrl:"https://res.cloudinary.com/contentexs/image/upload/v1580322153/dallas.jpg"},{name:"Barcelona",imgUrl:"https://res.cloudinary.com/contentexs/image/upload/v1580322153/barcelona.jpg"},{name:"Bangkok",imgUrl:"https://res.cloudinary.com/contentexs/image/upload/v1580322153/bangkok.jpg"},{name:"Duino",imgUrl:"https://res.cloudinary.com/contentexs/image/upload/v1580322154/duino.jpg"}]:[{name:"American",imgUrl:"https://res.cloudinary.com/contentexs/image/upload/v1580324681/default-c.jpg"},{name:"Spanish",imgUrl:"https://res.cloudinary.com/contentexs/image/upload/v1580324681/barcelona.jpg"},{name:"Bangkok",imgUrl:"https://res.cloudinary.com/contentexs/image/upload/v1580322135/asian.jpg"},{name:"Italian",imgUrl:"https://res.cloudinary.com/contentexs/image/upload/v1580322135/italian.jpg"}],r.a.createElement("div",{className:"main-categories-container category-cards"},t&&t.map((function(t,a){return r.a.createElement(W,{key:a,category:t,displayCategory:e.props.displayCategory})})))}}]),t}(n.Component),re=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(!this.props.meal)return r.a.createElement("div",null);var e=this.props.meal;return r.a.createElement(G.a,{to:"/meal/".concat(e._id)},r.a.createElement("div",{className:"category-card"},r.a.createElement("div",{className:"img-wrapper"},r.a.createElement("img",{src:e.imgUrl,alt:"category",className:"card-img"})),r.a.createElement("h5",{className:"card-name"},e.cuisineType),r.a.createElement("div",{className:"card-total-one"},r.a.createElement("div",null,r.a.createElement("span",null,e.title))),r.a.createElement("div",{className:"card-hosted"},r.a.createElement("div",null,r.a.createElement("span",null,e.country," "),",",r.a.createElement("span",null,e.city," "))),r.a.createElement("div",{className:"card-avg-price"},r.a.createElement("div",null,r.a.createElement("span",{className:"title"},"Price:"),r.a.createElement("span",null,"\xa0",e.price))),r.a.createElement("div",{className:"card-btn"},r.a.createElement("span",{className:"btn"},"View Event"))))}}]),t}(n.Component),se=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=[];return e=[{_id:"5e273828d7a1f4e499a19d16",imgUrl:"http://res.cloudinary.com/due4sgv19/image/upload/v1580641219/xn93qtdhbrskrw8iebqz.jpg",city:"Dallas",country:"TEXAS",price:45,cuisineType:"American",title:"Arkadiy's American Dinner"},{_id:"5e296e0e02c9ab91791f509d",imgUrl:"https://cdn-image.departures.com/sites/default/files/styles/responsive_900x600/public/1543595955/floral-cobblestone-streets-cadaques-costa-brava-spain-GAUDISPAIN1118.jpg?itok=lNxj1eU-",city:"Barcelona",country:"Spain",price:45,cuisineType:"Spanish",title:"El Rey Del Paella"},{_id:"5e296e0e02c9ab91791f509c",imgUrl:"https://www.pata.org/wp-content/uploads/2017/07/unnamed-19.jpg",city:"Bangkok",country:"Thailand",price:30,cuisineType:"Asian",title:"Waan's Thai Appetizers"},{_id:"5e297aff02c9ab91791f509e",imgUrl:"https://image.shutterstock.com/image-photo/palma-de-mallorca-spain-may-260nw-490104130.jpg",city:"Barcelona",country:"Spain",price:32,cuisineType:"Spanish",title:"Casa Patricia"}],r.a.createElement("div",{className:"main-categories-container category-cards"},e&&e.map((function(e,t){return r.a.createElement(re,{key:t,meal:e})})))}}]),t}(n.Component),ce=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-meet-hosts-container"},r.a.createElement("div",{className:"bg-video"},r.a.createElement("video",{className:"bg-video-content",autoPlay:!0,muted:!0,loop:!0},r.a.createElement("source",{src:"https://res.cloudinary.com/contentexs/video/upload/v1580346727/hosts-bg.mp4",type:"video/mp4"})," Your browser is not supported!")),r.a.createElement("div",{className:"hosts"},r.a.createElement("div",{className:"host-container"},r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580359192/002.jpg",alt:"Our event hosts"}),r.a.createElement("h2",null,"Mary Smith"),r.a.createElement("h3",{className:"host-txt"}," I'm just someone who likes cooking and for whom sharing food is a form of expression."),r.a.createElement("blockquote",{className:"host-reviews"},"Amazing! I had such a fantastic time at Mary's home. She is a great host -- it felt like dinner with family. Wonderful, flavorful food and lots of it. Thank You!",r.a.createElement("cite",null,"Alberto Duncan"))),r.a.createElement("div",{className:"host-container"},r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580360371/001.jpg",alt:"Our event hosts"}),r.a.createElement("h2",null,"Kathy Wilson"),r.a.createElement("h3",{className:"host-txt"}," I love cooking with my friends, sharing recipes and meeting new people."),r.a.createElement("blockquote",{className:"host-reviews"},"Kathy and Luc were incredibly hospitable and full of stories from their incredibly full lives. The boat was beautiful and so was the area we saw while we were on it. One of the best meals I had in my life",r.a.createElement("cite",null,"Lisa Freeman")))))}}]),t}(n.Component),ie=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.load()}},{key:"render",value:function(){return console.log("home page",this.props.meals),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"hero-container"},r.a.createElement("div",{className:"hero-box flex column align-center"},r.a.createElement("div",{className:"text flex column align-center"},r.a.createElement("span",null,"let's eat."),r.a.createElement("span",null,"Discover Home Cooking Around The World")),r.a.createElement("div",{className:"how-to"},r.a.createElement("ul",{className:"clean-list flex align-center justify-center margin-bottom-20"},r.a.createElement("li",null,r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580171632/globe.svg",alt:"Food"}),r.a.createElement("span",null,r.a.createElement("span",null,"1.")," Location")),r.a.createElement("li",null,r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580171632/event.svg",alt:"Food"}),r.a.createElement("span",null,r.a.createElement("span",null,"2."),"Select")),r.a.createElement("li",null,r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580172376/calender.svg",alt:"Food"}),r.a.createElement("span",null,r.a.createElement("span",null,"3."),"Register")))),r.a.createElement("div",{className:"search-container"},r.a.createElement(Y,{placeholder:"Where to ?  "})))),r.a.createElement("div",{className:"section-container"},this.props.meals.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section-title-container"},r.a.createElement("h2",null,"Browse Our Top Locations")),r.a.createElement(ne,{meals:this.props.meals,displayCategory:"Location"}))),r.a.createElement("div",{className:"section-container"},this.props.meals.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section-title-container"},r.a.createElement("h2",null,"View Our Exciting Cuisines")),r.a.createElement(ne,{meals:this.props.meals,displayCategory:"Cuisine"}))),r.a.createElement("div",{className:"section-container"},this.props.meals.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section-title-container"},r.a.createElement("h2",null,"Here Are Our New Events")),r.a.createElement(se,{meals:this.props.meals}))),r.a.createElement("div",{className:"section-container"},r.a.createElement("div",{className:"section-title-container"},r.a.createElement("h2",null,"Meet Our Hosts")),r.a.createElement(ce,null)))}}]),t}(n.Component),le={load:k},oe=Object(i.b)((function(e){return{loggedInUser:e.user.loggedInUser,filter:e.filter.filter,meals:e.meal.meals,msg:e.socket.msg}}),le)(ie),ue=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onCardClick=function(e){a.props.onCardClick(e)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"getNextDateFromNow",value:function(){var e,t=-1/0;return this.props.meal.occurrences.forEach((function(a,n){a.date>t&&a.date>Date.now()&&(t=a,e=n)})),{max:t,maxIdx:e}}},{key:"getDifferenceInDays",value:function(e){var t=new Date(e),a=new Date(Date.now()),n=(t.getTime()-a.getTime())/864e5;return Math.floor(n)}},{key:"getPromotionMsg",value:function(){var e=this.getNextDateFromNow();return this.props.meal.isPromoted?"super host":this.getDifferenceInDays(e.max.date)<=2?"hurry up!":this.props.meal.capacity-this.props.meal.occurrences[e.maxIdx].attendees.length<4?"".concat(this.props.meal.capacity-this.props.meal.occurrences[e.maxIdx].attendees.length," places left!"):null}},{key:"getMainMsg",value:function(){return"location"===this.props.renderType?{val:this.props.meal.location.city,type:"location"}:{val:this.props.meal.cuisineType,type:"cuisine"}}},{key:"render",value:function(){var e=this,t=this.getMainMsg(),a=Object($.a)(this.props.meal.reviews),n="location"===t.type?"https://res.cloudinary.com/contentexs/image/upload/v1580170530/dish-round.svg":"https://res.cloudinary.com/contentexs/image/upload/v1580171634/location.svg",s=(this.props.meal&&a&&this.props.getAvgRate(a),new Date(this.getNextDateFromNow().max.date)),c=this.getPromotionMsg();return s=s.toDateString().split(" ").slice(1,3).join(" "),this.props.meal&&r.a.createElement("div",{className:""},r.a.createElement("div",{className:"category-card-prev"},r.a.createElement("div",{className:"image-with-superhost"},c&&r.a.createElement("div",{className:"super-host-preview "},c),r.a.createElement("img",{src:this.props.meal.imgUrls[0],alt:"category",className:"card-img-prev",onClick:function(){return e.onCardClick(e.props.meal._id)}})),r.a.createElement("h5",{className:"card-name-prev"},t.val),r.a.createElement("div",{className:"card-total-one-prev"},r.a.createElement("img",{src:n,alt:"icon"}),r.a.createElement("div",null,r.a.createElement("span",null,"location"===t.type?this.props.meal.cuisineType:this.props.meal.location.city+", "+this.props.meal.location.country))),r.a.createElement("div",{className:"card-hosted-prev"},r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580170530/dinner-round.svg",alt:"dinner icon"}),r.a.createElement("div",null,r.a.createElement("span",null," ",this.props.meal.title," "))),r.a.createElement("div",{className:"card-next-date-prev"},r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580170530/calender-round.svg",alt:"calender icon"}),r.a.createElement("div",null,r.a.createElement("span",{className:"title-prev"},"Next Event Is On, ")," ",r.a.createElement("span",null,s))),r.a.createElement("div",{className:"card-avg-price-prev"},r.a.createElement("img",{src:"https://res.cloudinary.com/contentexs/image/upload/v1580328925/money.svg",alt:"money icon"}),r.a.createElement("div",null,r.a.createElement("span",{className:"title-prev"},"Price is "),r.a.createElement("span",null,"$",this.props.meal.price,r.a.createElement("small",null," (per guest)")))),r.a.createElement("div",{className:"card-btn-prev"},r.a.createElement(G.a,{to:"/meal/".concat(this.props.meal._id),className:"btn"},r.a.createElement("span",{className:""},"View Event")))))}}]),t}(n.Component),me=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"main-categories-container category-cards-list"},this.props.meals.map((function(t){return r.a.createElement("div",{key:t._id},r.a.createElement(ue,{onCardClick:e.props.onCardClick,meal:t,getAvgRate:e.props.getAvgRate,renderType:e.props.renderType}))})))}}]),t}(n.Component),pe=Object(d.f)(me);function de(e){return r.a.createElement("div",{className:e.isSelected,onClick:e.onBadgeClick},r.a.createElement("h3",{className:""},e.badge))}var he=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("span",{className:"badge-list-container"},this.props.badges&&this.props.badges.map((function(t,a){return r.a.createElement("div",{className:"badge-card-container ",key:a},r.a.createElement(de,{isSelected:t===e.props.selectedBadge?"selected":"",onBadgeClick:e.props.onBadgeClick,badge:t}))})))}}]),t}(n.Component),ge=Object(d.f)(he),fe=a(238),ve=a.n(fe);function ye(e){var t=e.type,a=e.color;return r.a.createElement(ve.a,{type:t,color:a,height:100,width:100})}var Ee=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selectedBadge:"",renderType:"",isLoading:!0},a.resetFilterDefinitions=function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(a.props.setFilter({userId:"",at:"",type:"",location:{city:"",country:""},tags:""}));case 2:case"end":return e.stop()}}))},a.getAvgRate=function(e){return e.reduce((function(e,t){return e+parseInt(t.rate)}),0)/e.length},a.load=function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(a.props.load(a.props.filter));case 2:case"end":return e.stop()}}))},a.loadMeals=function(){var e,t,n,r;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!a.props.location.pathname.includes("results")){s.next=10;break}return e=a.props.match.params.results,s.next=4,f.a.awrap(a.props.setFilter(Object(v.a)({},a.filter,{tags:e})));case 4:return a.setState({isLoading:!0}),s.next=7,f.a.awrap(a.load());case 7:a.setState({isLoading:!1}),s.next=42;break;case 10:if(t="",a.props.location.pathname.includes("location")?t="location":a.props.location.pathname.includes("cuisine")&&(t="cuisine"),a.setBadges(t),a.setState({renderType:t}),"location"!==t){s.next=30;break}if(n=a.props.match.params.location){s.next=22;break}return s.next=19,f.a.awrap(a.props.loadMealsByLocation());case 19:a.setState({isLoading:!1}),s.next=28;break;case 22:return s.next=24,f.a.awrap(a.props.setFilter(Object(v.a)({},a.props.filter,{location:Object(v.a)({},a.props.location,{city:n})})));case 24:return a.setState({isLoading:!0}),s.next=27,f.a.awrap(a.load());case 27:a.setState({isLoading:!1});case 28:s.next=42;break;case 30:if(r=a.props.match.params.cuisine){s.next=36;break}a.props.loadMealsByCuisine(),a.setState({isLoading:!1}),s.next=42;break;case 36:return s.next=38,f.a.awrap(a.props.setFilter(Object(v.a)({},a.props.filter,{type:r})));case 38:return a.setState({isLoading:!0}),s.next=41,f.a.awrap(a.load());case 41:a.setState({isLoading:!1});case 42:case"end":return s.stop()}}))},a.setBadges=function(e){return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("location"!==e||a.props.cities.length>0){t.next=5;break}return t.next=3,f.a.awrap(a.props.loadCities());case 3:t.next=8;break;case 5:if("cuisine"!==e||a.props.cuisines.length>0){t.next=8;break}return t.next=8,f.a.awrap(a.props.loadCuisines());case 8:case"end":return t.stop()}}))},a.onLocationClick=function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.target.innerText,n.next=3,f.a.awrap(a.resetFilterDefinitions());case 3:return n.next=5,f.a.awrap(a.props.setFilter(Object(v.a)({},a.props.filter,{location:Object(v.a)({},a.props.filter.location,{city:t})})));case 5:return a.props.history.push("/meal/location/".concat(t)),n.next=8,f.a.awrap(a.loadMeals());case 8:case"end":return n.stop()}}))},a.onCuisineClick=function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.target.innerText,n.next=3,f.a.awrap(a.resetFilterDefinitions());case 3:return n.next=5,f.a.awrap(a.props.setFilter(Object(v.a)({},a.props.filter,{type:t})));case 5:return a.props.history.push("/meal/cuisine/".concat(t)),n.next=8,f.a.awrap(a.loadMeals());case 8:case"end":return n.stop()}}))},a.onCardClick=function(e){a.props.history.push("/meal/".concat(e))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.awrap(this.resetFilterDefinitions());case 2:if(!this.props.location.pathname.includes("results")){t.next=11;break}return this.setState({renderType:"results"}),e=this.props.match.params.results,t.next=7,f.a.awrap(this.props.setFilter(Object(v.a)({},this.filter,{tags:e})));case 7:return t.next=9,f.a.awrap(this.loadMeals());case 9:t.next=13;break;case 11:return t.next=13,f.a.awrap(this.loadMeals());case 13:case"end":return t.stop()}}),null,this)}},{key:"componentDidUpdate",value:function(e){return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(JSON.stringify(e.location.pathname)===JSON.stringify(this.props.location.pathname)){t.next=3;break}return t.next=3,f.a.awrap(this.loadMeals());case 3:case"end":return t.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(this.resetFilterDefinitions());case 2:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this.props.location.pathname.includes("results");return r.a.createElement("div",{className:"container"},r.a.createElement(Y,null),this.state.isLoading&&(!this.props.cities&&"location"===this.state.renderType&&!e||!this.props.cuisines&&"cuisine"===this.state.renderType&&!e)&&r.a.createElement("div",{className:"spinner-container"},r.a.createElement(ye,{type:"spin"})),this.props.cuisines&&"cuisine"===this.state.renderType&&!e&&r.a.createElement(ge,{selectedBadge:this.state.selectedBadge,onBadgeClick:this.onCuisineClick,badges:this.props.cuisines}),this.props.cities&&"location"===this.state.renderType&&!e&&r.a.createElement(ge,{selectedBadge:this.state.selectedBadge,onBadgeClick:this.onLocationClick,badges:this.props.cities}),this.props.meals.length>0&&this.state.renderType&&!this.state.isLoading&&r.a.createElement(pe,{onCardClick:this.onCardClick,onCuisineClick:this.onCuisineClick,onLocationClick:this.onLocationClick,renderType:this.state.renderType,meals:this.props.meals,getAvgRate:this.getAvgRate}),!this.state.isLoading&&0===this.props.meals.length&&e&&r.a.createElement("div",null,"Your search has no results"))}}]),t}(n.Component),be={load:k,setFilter:B,loadCuisines:M,loadCities:D,loadMealsByLocation:T,loadMealsByCuisine:S},Oe=Object(i.b)((function(e){return{meals:e.meal.meals,filter:e.filter.filter,cities:e.meal.cities,cuisines:e.meal.cuisines}}),be)(Ee),we=a(471),Ne=a(464),xe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0,vertical:"top",horizontal:"center",width:"20%",style:{backgroundColor:"#c0c0c0",marginTop:"138px"}},a.handleClick=function(e){a.setState(Object(v.a)({open:!0},e))},a.handleClose=function(){a.setState(Object(v.a)({},a.state,{open:!1}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.updateOpenState()}},{key:"componentDidUpdate",value:function(e){}},{key:"updateOpenState",value:function(){this.setState(Object(v.a)({},this.state,{open:this.props.open}))}},{key:"render",value:function(){var e=this.state,t=e.vertical,a=e.horizontal,n=e.open;return r.a.createElement("div",null,r.a.createElement(we.a,{anchorOrigin:{vertical:t,horizontal:a},key:"".concat(t,",").concat(a),open:n,onClose:this.handleClose},r.a.createElement(Ne.a,{style:this.state.style,message:this.props.msg})))}}]),t}(n.Component),je=Object(i.b)((function(e){return{}}),{})(xe),Ce=a(239),ke=Object(Ce.a)([function(e){return e.meal.selectedMeal},function(e){return e.user.loggedInUser}],(function(e,t){var a,n={};if(!e)return null;var r,s,c,i,l=Object(v.a)({},e);return!(a=l.occurrences&&l.occurrences.length>0?ae.getItemsInRange(l.occurrences,new Date):[])||a.length<1?{errorMsg:"There are no available events"}:((n={storeMeal:l,id:l._id,host:{_id:l.hostedBy._id,fullName:l.hostedBy.fullName,imgUrl:l.hostedBy.imgUrl},messages:{noAvailableOccurrence:"We are sorry, It seems we made a mistake and this event is not active. You will be redirected to our events page to continue browsing.",eventSoldOut:"We are sorry, It seems we made a mistake and this event is all sold out. You will be redirected to our events page to continue browsing.",hasAttendees:"Meet the other guests",noAttendees:"Be the first one to join.",userRegistered:"You are booked to this event",pleaseLogin:"Please login before proceeding."},registrationCart:{},selectedOccurance:{},availableDates:{},isPromoted:l.isPromoted,eventSetup:{capacity:parseInt(l.capacity),cuisineType:l.cuisineType,mealType:l.mealType,startTime:"Dinner"===l.mealType?"6:00PM":"Lunch"===l.mealType?"12:00PM":"9:00AM",endTime:"Dinner"===l.mealType?"9:00PM":"Lunch"===l.mealType?"4:00PM":"11:00AM"},price:parseFloat(l.price),currency:l.currency,title:l.title,description:l.description,eventMenu:l.menu,location:{country:l.location.country,city:l.location.city,address:l.location.address,lat:l.location.lat,lng:l.location.lng},images:l.imgUrls,hostReviews:l.reviews.map((function(e){return{user:{_id:e.byUser._id,fullName:e.byUser.fullName,imgUrl:e.byUser.imgUrl},date:e.at,txt:e.txt,rate:parseInt(e.rate)}})),occurrences:(r=a,s=l.price,c=l.capacity,i=t?t._id:0,r.map((function(e){var t=0;return{id:e.id,date:e.date,reservations:e.attendees.map((function(e){return t+=parseInt(e.numOfAttendees),{user:{_id:e._id,fullName:e.fullName,imgUrl:e.imgUrl},occurrenceAttendees:parseInt(e.numOfAttendees),occurrenceTotalPrice:parseInt(e.numOfAttendees)*parseInt(s),isLoggedInUser:i===e._id}})),totalReservations:t,seatsLeft:parseInt(c)-t}})))}).occurrences.sort(ae.sortByDate),n.selectedOccurance=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=null;return t?e.find((function(e){return new Date(e.date).getTime()===new Date(t).getTime()})):((a=e.find((function(e){return!0===ae.findAllByKey(e,"isLoggedInUser")})))||(a=e.find((function(e){return e.seatsLeft>0}))),!a&&e.length>0&&(a=e[0]),a)}(n.occurrences),n.availableDates=function(e,t){var a=[];return e.reduce((function(e,n){if(!a.includes(n.date)){a.push(n.date);var r=t&&n.id===t.id;e.push({date:n.date,isSelected:r})}return e}),[])}(n.occurrences,n.selectedOccurance),n.eventAttendees=function(e){var t=[];return e?e.reservations.reduce((function(e,a){return t.includes(a.user._id)||(t.push(a.user._id),e.push(a.user)),e}),[]):t}(n.selectedOccurance),n.hostRating=function(e){var t=e?e.length:0,a=0;t>0&&(a=e.reduce((function(e,t){return e+parseInt(t.rate)}),0)/t);return{totalRated:t,avgRate:a>0?a.toFixed(1):0}}(n.hostReviews),n)}));var Ie=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.images;return r.a.createElement("div",{className:"gallery-container "},r.a.createElement("div",{className:"gallery"},r.a.createElement("figure",{className:"gallery-item"},r.a.createElement("img",{alt:"",name:"main",className:"gallery-img",src:e[0]})),r.a.createElement("figure",{className:"gallery-item"},r.a.createElement("img",{alt:"",name:"one",className:"gallery-img",src:e[1]})),r.a.createElement("figure",{className:"gallery-item"},r.a.createElement("img",{alt:"",name:"two",className:"gallery-img",src:e[2]})),r.a.createElement("figure",{className:"gallery-item"},r.a.createElement("img",{alt:"",name:"three",className:"gallery-img",src:e[3]}))))}}]),t}(n.Component),De=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hostRating,a=e.eventSetup;return r.a.createElement("div",{className:"card-simple nav-container"},r.a.createElement("div",{className:"top-box flex "},r.a.createElement("a",{className:"btn",href:"#menu"},"Menu"),r.a.createElement("a",{className:"btn",href:"#reviews"},"Reviews"),r.a.createElement("a",{className:"btn",href:"#location"},"Location")),r.a.createElement("div",{className:"bottom-box flex"},t.avgRate>0&&r.a.createElement("div",{className:t.avgRate&&t.avgRate>0?"rate":"hide"},r.a.createElement("i",{className:"icon-small fas fa-star"}),r.a.createElement("span",null,t.avgRate),r.a.createElement("span",null,"(",t.totalRated,")")),r.a.createElement("div",{className:"meal-period"},r.a.createElement("span",null,a.startTime)," - ",r.a.createElement("span",null,a.endTime)),r.a.createElement("div",null,a.mealType),r.a.createElement("div",null,a.cuisineType),r.a.createElement("div",{className:"meal-guests"},r.a.createElement("span",null,a.capacity),r.a.createElement("span",null," Guests "))))}}]),t}(n.Component),Te=Object(i.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),{})(De),Se=a(65),Me=a.n(Se),Ae=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={meal:[],selectedOccurance:{},numOfAttendees:0,totalPrice:0,date:"",availableSeats:0,availableText:"",registerCounter:0,buttonText:"",paymentClass:"hide",displayMsg:"hide",msg:""},a.handleChange=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;if("numOfAttendees"===t&&a.state.numOfAttendees!==n)a.setState({numOfAttendees:parseInt(n),totalPrice:parseInt(n)*parseInt(a.state.meal.price),availableSeats:parseInt(a.state.availableSeats)-parseInt(n),availableText:"".concat(parseInt(a.state.availableSeats)-parseInt(n)," available seats")});else if(a.state.date!==n){var r=a.props.meal.occurrences.find((function(e){return Me()(e.date).format("MM-DD-YY")===n}));if(a.props.loggedInUser&&r.reservations&&r.reservations.length>0){var s=r.reservations.find((function(e){return e.user._id===a.props.loggedInUser._id}));s&&(s.isLoggedInUser=!0)}a.setState({date:n,selectedOccurance:r,availableSeats:parseInt(r.seatsLeft)-parseInt(a.state.numOfAttendees),availableText:"".concat(parseInt(r.seatsLeft)-parseInt(a.state.numOfAttendees)," available seats"),msg:"",displayMsg:"hide"})}},a.onEventRegistration=function(e){if(e.preventDefault(),0===a.state.registerCounter)a.setState({registerCounter:1,buttonText:"Book Event",paymentClass:"payment"});else if(a.state.registerCounter>=1&&0!==a.state.numOfAttendees){if(!a.props.loggedInUser)return console.log("Meal Reservation - user not logged in"),void a.setState({msg:a.state.meal.messages.pleaseLogin,displayMsg:""});a.props.onEventRegistration({id:a.state.selectedOccurance.id,date:+Me()(a.state.date,"MM-DD-YY"),numOfAttendees:a.state.numOfAttendees}),a.setState({registerCounter:0,msg:"",displayMsg:"hide",buttonText:"Book Event",paymentClass:"hide"})}},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.meal,t=null;e.selectedOccurance&&e.selectedOccurance.reservations&&e.selectedOccurance.reservations.length>0?(t=e.selectedOccurance.reservations.find((function(e){return e.isLoggedInUser})),this.setState({meal:e,msg:t&&t.isLoggedInUser?e.messages.userRegistered:"",displayMsg:t&&t.isLoggedInUser?"":"hide",selectedOccurance:e.selectedOccurance,numOfAttendees:t&&t.isLoggedInUser?t.occurrenceAttendees:0,totalPrice:t&&t.isLoggedInUser?t.occurrenceTotalPrice:0,date:Me()(e.selectedOccurance.date).format("MM-DD-YY"),availableSeats:parseInt(e.selectedOccurance.seatsLeft),availableText:"".concat(e.selectedOccurance.seatsLeft," available seats"),registerCounter:0,buttonText:t&&t.isLoggedInUser?"Update Event":"Register Event",paymentClass:t&&t.isLoggedInUser?"payment":"hide"})):e.selectedOccurance?this.setState({meal:e,msg:"",displayMsg:"hide",selectedOccurance:e.selectedOccurance,numOfAttendees:0,totalPrice:0,date:Me()(e.selectedOccurance.date).format("MM-DD-YY"),availableSeats:parseInt(e.selectedOccurance.seatsLeft),availableText:"".concat(e.selectedOccurance.seatsLeft," available seats"),registerCounter:0,buttonText:"Register Event",paymentClass:"hide"}):this.setState({meal:e,msg:"",displayMsg:"hide",selectedOccurance:{},numOfAttendees:0,totalPrice:0,date:Me()(new Date).format("MM-DD-YY"),availableSeats:0,availableText:"There are no available seats",registerCounter:0,buttonText:"Event",paymentClass:"hide"})}},{key:"render",value:function(){var e=this.props.meal;return r.a.createElement("div",{className:"card-simple card-bkg-yellow  payment-container"},r.a.createElement("div",{className:"price"},r.a.createElement("span",null,"$"),e.price,r.a.createElement("small",null,"per guest")),r.a.createElement("div",null),r.a.createElement("div",{className:"details-container"},r.a.createElement("div",{className:"msg"},r.a.createElement("span",{className:this.state.displayMsg},this.state.msg)),r.a.createElement("div",{className:"date"},r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement("select",{name:"date",onChange:this.handleChange,value:this.state.date,style:{fontFamily:"raleway"},className:"minimal"},e.availableDates.map((function(e,t){return r.a.createElement("option",{key:t,value:Me()(e.date).format("MM-DD-YY")},Me()(e.date).format("MM-DD-YY"))})))),r.a.createElement("div",{className:"guests"},r.a.createElement("label",{htmlFor:"numOfAttendees"},"Number of Guests"),r.a.createElement("input",{type:"number",placeholder:"Number of Guests",min:"1",name:"numOfAttendees",onChange:this.handleChange,value:0===this.state.numOfAttendees?"":this.state.numOfAttendees}),r.a.createElement("small",{className:"small-text"})),r.a.createElement("div",{className:this.state.paymentClass},r.a.createElement("ul",{className:"clean-list"},r.a.createElement("li",null,r.a.createElement("span",null,"$",e.price," x ",this.state.numOfAttendees),r.a.createElement("span",null,"guests")),r.a.createElement("li",null,r.a.createElement("span",null,"Total"),r.a.createElement("span",null,"$",this.state.totalPrice)))),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.onEventRegistration,className:"button btn-red"},this.state.buttonText))))}}]),t}(n.Component),Ue=Object(i.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),null)(Ae),Le=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",showLink:"hide",linkText:""},a.toggleText=function(e){if(e.preventDefault(),"show more"===a.state.linkText)a.setState({text:a.props.text,showLink:"",linkText:"show less"});else{var t=a.props.text.slice(0,180);a.setState({text:"".concat(t," ..."),showLink:"",linkText:"show more"})}},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.text.length;if(Math.floor(e/60)>this.props.showRows){var t=this.props.text.slice(0,180);this.setState({text:"".concat(t," ..."),showLink:"",linkText:"show more"})}else this.setState({text:this.props.text})}},{key:"render",value:function(){return r.a.createElement("div",{className:"show-hide-text-container"},r.a.createElement("h3",null,"A word about the experience"),r.a.createElement("p",null,this.state.text,r.a.createElement("a",{className:this.state.showLink,href:"#",onClick:this.toggleText},this.state.linkText)))}}]),t}(n.Component),Re=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.menu;return r.a.createElement("div",{className:" menu-main-container"},r.a.createElement("div",{className:"card-simple card-bkg-white menu-container"},r.a.createElement("div",{className:"main-title"},r.a.createElement("div",{className:"decor"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"41.125",height:"9.146"},r.a.createElement("path",{fill:"none",stroke:"#f8b500",strokeMiterlimit:"10",d:"M40.881 8.576L20.562.591.244 8.576"}),r.a.createElement("path",{fill:"none",stroke:"#f8b500",strokeMiterlimit:"10",d:"M40.881.591L20.562 8.576.243.591"}))),r.a.createElement("h3",{id:"menu"},"Menu"),r.a.createElement("div",{className:"decor"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"41.125",height:"9.146"},r.a.createElement("path",{fill:"none",stroke:"#f8b500",strokeMiterlimit:"10",d:"M40.881 8.576L20.562.591.244 8.576"}),r.a.createElement("path",{fill:"none",stroke:"#f8b500",strokeMiterlimit:"10",d:"M40.881.591L20.562 8.576.243.591"})))),r.a.createElement("div",{className:"menu-section"},r.a.createElement("h3",null,"First Course"),e.firstCourse.map((function(e,t){return r.a.createElement("div",{key:t,className:"menu-item"},e)}))),r.a.createElement("div",{className:"menu-section"},r.a.createElement("h3",null,"Main Course"),e.mainCourse.map((function(e,t){return r.a.createElement("div",{key:t,className:"menu-item"},e)}))),r.a.createElement("div",{className:"menu-section"},r.a.createElement("h3",null,"Dessert"),e.desserts.map((function(e,t){return r.a.createElement("div",{key:t,className:"menu-item"},e)}))),r.a.createElement("div",{className:"menu-section"},r.a.createElement("h3",null,"Beverages"),e.beverages.map((function(e,t){return r.a.createElement("div",{key:t,className:"menu-item"},e)})))))}}]),t}(n.Component),_e=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.attendee;return r.a.createElement("div",{className:"frame"},r.a.createElement("div",{className:"card-simple center"},r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"image"},r.a.createElement("div",{className:"circle-1"}),r.a.createElement("div",{className:"circle-2"}),r.a.createElement("img",{src:e.imgUrl,width:"70",height:"70",alt:e.fullName})),r.a.createElement("div",{className:"name"},e.fullName),r.a.createElement("div",{className:"address"},"US, New-York"))))}}]),t}(n.Component),Fe=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.attendees;return r.a.createElement("div",{className:"main-attendees-container"},e&&e.map((function(e,t){return r.a.createElement(_e,{key:t,attendee:e})})))}}]),t}(n.Component),Be=a(15);function Pe(e){return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:a=e,console.log("SocketAction -> msg",a),t({type:"ADD_MSG",msg:a});case 3:case"end":return n.stop()}}))}}var He=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",txt:"",rate:0,starClass:"icon-medium color-gray far fa-star",starSelected:"icon-medium color-yellow far fa-star",msgs:""},a.onSaveReviewForm=function(e){e.preventDefault(),a.props.onSaveReviewForm({email:a.state.email,txt:a.state.txt,rate:a.state.rate})},a.onToggleStar=function(e){e.preventDefault();var t=e.target.id;a.setState({rate:t})},a.onHandleChange=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;a.setState(Object(Be.a)({},t,n))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card-container-lg card-container-horizontal flex align-center justify-center"},r.a.createElement("div",{className:"card-background-lg main-review-form-container flex column align-end"},r.a.createElement("i",{className:"icon-medium color-gray fas fa-times",title:"Close",onClick:this.props.onCloseReviewForm}),r.a.createElement("form",{className:"review-form flex column align-center",onSubmit:this.onSaveReviewForm},r.a.createElement("h3",null,"How satisfied are you?"),r.a.createElement("div",{className:"rating flex margin-bottom-20"},Array.from(Array(5),(function(t,a){return r.a.createElement("i",{key:a,id:a+1,className:a<e.state.rate?e.state.starSelected:e.state.starClass,name:a+1,onClick:e.onToggleStar})}))),r.a.createElement("span",null,this.state.msgs),r.a.createElement("h3",null,"We would love to hear what you think"),r.a.createElement("div",{className:"email"},r.a.createElement("input",{type:"email",placeholder:"Email",name:"email",onChange:this.onHandleChange,required:!0})),r.a.createElement("div",{className:"review"},r.a.createElement("textarea",{className:"",id:"review",name:"txt",onChange:this.onHandleChange,min:"5",placeholder:"Tell us what you think"})),r.a.createElement("div",{className:"save"},r.a.createElement("button",{className:"button btn-main"},"SAVE"))),r.a.createElement("h4",{className:"review-h5"},"Thanks for your feedback")))}}]),t}(n.Component),qe={addMsg:Pe},Ye=Object(i.b)((function(e){return{loggedInUser:e.user.loggedInUser,msg:e.socket.msg}}),qe)(He),Ge=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.review;return r.a.createElement("div",{className:"review-container "},e&&r.a.createElement("blockquote",null,r.a.createElement("header",null,r.a.createElement("span",{"data-rating":e.rate||0},r.a.createElement("i",{className:"icon-small fas fa-star"}),r.a.createElement("i",{className:"icon-small fas fa-star"}),r.a.createElement("i",{className:"icon-small fas fa-star"}),r.a.createElement("i",{className:"icon-small fas fa-star"}),r.a.createElement("i",{className:"icon-small fas fa-star"})),r.a.createElement("strong",null,"Event Name "),r.a.createElement("span",null,Me()(e.date).format("MM-DD-YY")),r.a.createElement("span",null,"By ",r.a.createElement("em",null,e.user.fullName)),r.a.createElement("span",null,"Verified Review")),r.a.createElement("p",null,e.txt)))}}]),t}(n.Component),We=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.reviews;return r.a.createElement("div",{className:"main-reviews-container"},e&&e.map((function(e,t){return r.a.createElement(Ge,{key:t,review:e})})))}}]),t}(n.Component),$e=Object(i.b)((function(e){return{}}),{})(We),ze=a(145),Je={width:"48vw",height:"35vh",marginBottom:"60vh",zIndex:-1},Ke=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=Object(v.a)({},this.props.location);return delete e.address,delete e.city,delete e.country,r.a.createElement(ze.Map,{style:Je,google:this.props.google,initialCenter:e,zoom:14},r.a.createElement(ze.Marker,{name:"Current location"}))}}]),t}(n.Component),Ve=Object(ze.GoogleApiWrapper)({apiKey:"AIzaSyDt708aK1FKYJTOT61i_xrzY9R3UD3_6Lw&&"})(Ke),Xe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={pageOverlayClass:"hide",displayReviewForm:"hide",occurrenceAttendees:{}},a.signToSocketEvent=function(e){F.setup(),F.emit("newChannel","onEventRegistration".concat(e)),F.on("addMsg",a.addMsg)},a.onEventRegistration=function(e){var t,n,r,s;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(!a.props.loggedInUser){c.next=18;break}if(t=a.props.loggedInUser,n=Object(v.a)({},a.props.meal.storeMeal),console.log("after spread",n),r=n.occurrences.find((function(t){return t.id===e.id}))){c.next=10;break}return console.log("onEventRegistration: couldn't find selected occurrence",e),c.abrupt("return");case 10:return(s=r.attendees.find((function(e){return e._id===t._id})))?s.numOfAttendees=parseInt(s.numOfAttendees)+parseInt(e.numOfAttendees):r.attendees=[].concat(Object($.a)(r.attendees),[{_id:t._id,fullName:t.fullName,imgUrl:t.imgUrl,numOfAttendees:e.numOfAttendees}]),r.total=parseInt(r.total)+parseInt(e.numOfAttendees),console.log("after adding data",n),c.next=16,f.a.awrap(a.props.add(n));case 16:t.titleHost=n.title,F.emit("newMsg",{meal:n,loggedInUser:t});case 18:case"end":return c.stop()}}))},a.addMsg=function(e){},a.onDisplayReviewForm=function(e){e.preventDefault(),a.props.loggedInUser&&a.setState({displayReviewForm:"",pageOverlayClass:"page-overlay show-block"})},a.onCloseReviewForm=function(e){e.preventDefault(),a.setState({displayReviewForm:"hide",pageOverlayClass:"hide"})},a.onSaveReviewForm=function(e){var t,n,r;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(a.setState({displayReviewForm:"hide",pageOverlayClass:"hide"}),!a.props.loggedInUser){s.next=8;break}return t=a.props.loggedInUser,n=Object(v.a)({},a.props.meal),r={byUser:{_id:t._id,fullName:t.fullName,imgUrl:t.imgUrl},txt:e.txt,rate:e.rate,at:Date.now()},n.reviews?n.reviews=[].concat(Object($.a)(n.reviews),[r]):n.reviews=[r],s.next=8,f.a.awrap(a.props.add(n));case 8:case"end":return s.stop()}}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e,t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props.match.params.id,a.next=3,f.a.awrap(this.props.getById(e));case 3:console.log("MealDetails -> componentDidMount",this.props.meal),t=this.props.meal.storeMeal.hostedBy._id,this.signToSocketEvent(t),F.emit("newChannel","onEventRegistration".concat(t)),F.on("addMsg",this.addMsg);case 8:case"end":return a.stop()}}),null,this)}},{key:"render",value:function(){if(this.props.meal){var e=this.props.meal;return r.a.createElement("div",{className:"meal-details-page-container"},e&&r.a.createElement(r.a.Fragment,null,e.images&&e.images.length>0&&r.a.createElement(Ie,{images:e.images}),r.a.createElement("div",{className:"container page-title"},r.a.createElement("h2",null,e.title)),r.a.createElement("div",{className:"container meal-details-container flex"},r.a.createElement("div",{className:"left-box flex-shrink-70"},r.a.createElement(Te,{eventSetup:e.eventSetup,hostRating:e.hostRating}),r.a.createElement(Le,{text:e.description,showRows:3}),r.a.createElement(Re,{menu:e.eventMenu}),r.a.createElement("h3",null,e.eventAttendees&&e.eventAttendees.length>0?e.messages.hasAttendees:e.messages.noAttendees),e.eventAttendees&&e.eventAttendees.length>0&&r.a.createElement(Fe,{attendees:e.eventAttendees}),r.a.createElement("div",{className:"reviews-title-wrapper"},r.a.createElement("h3",{id:"reviews"},"Reviews"),r.a.createElement("a",{title:"Review Us",href:"",onClick:this.onDisplayReviewForm},r.a.createElement("i",{className:"icon-large far fa-plus-square"}))),r.a.createElement("div",{className:this.state.displayReviewForm},r.a.createElement(Ye,{onSaveReviewForm:this.onSaveReviewForm,onCloseReviewForm:this.onCloseReviewForm})),e.hostReviews&&r.a.createElement($e,{reviews:e.hostReviews}),r.a.createElement("div",{className:"google-map-container"},r.a.createElement("h3",{id:"location"},"Location"),r.a.createElement(Ve,{location:e.location}))),r.a.createElement("div",{className:"right-box flex-shrink-30"},r.a.createElement(Ue,{meal:e,onEventRegistration:this.onEventRegistration})))))}return r.a.createElement("div",{className:"border-loading-indicator col-2 row-1"})}}]),t}(n.Component),Qe={getById:A,add:U},Ze=Object(i.b)((function(e){return{loggedInUser:e.user.loggedInUser,meal:ke(e)}}),Qe)(Xe),et=a(240),tt=(a(333),a(245)),at=a.n(tt),nt=(a(417),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onClickRow=function(e,t){e.stopPropagation(),a.props.history.push("/meal/".concat(a.props.meal._id))},a.onEditClick=function(e){e.stopPropagation(),a.props.history.push("/meal/edit/".concat(a.props.meal._id))},a.onDelete=function(e){e.stopPropagation();var t=a.props.match.params.id,n=a.props.meal._id,r=a.props.meal.occurensId;a.props.onDelete(t,n,r)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.meal.occurrences;if(this.props.meal.isHosted)return r.a.createElement(r.a.Fragment,null,t&&t.map((function(a){var n=new Date(a.date).toLocaleDateString();return r.a.createElement("div",{key:"Key"+t.id,className:"tab-content "},r.a.createElement("div",{className:" "},r.a.createElement("ul",{className:"host-list flex space-around clean-list"},r.a.createElement("li",null,r.a.createElement("span",null,"Date: "),r.a.createElement("span",null,n)),r.a.createElement("li",null,r.a.createElement("span",null,"Total Guests:"),r.a.createElement("span",null," ",e.props.meal.capacity)),r.a.createElement("li",null,r.a.createElement("span",null,"Registered Guests:")," ",r.a.createElement("span",null,a.total)),r.a.createElement("li",null,r.a.createElement("span",null,"Revenue:")," ",r.a.createElement("span",null,a.total*e.props.meal.price," ")),r.a.createElement("li",null,r.a.createElement("span",null,"Commission:")," ",r.a.createElement("span",null," ",a.total*e.props.meal.price*.1)),r.a.createElement("li",null,r.a.createElement("span",null," ",r.a.createElement(at.a,{className:" cursor",onClick:e.onEditClick})," ")))))})));var a=new Date(this.props.meal.date).toLocaleDateString();return!this.props.meal.isHosted&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tab-content cursor ",onClick:this.onClickRow,title:"Click me to see event"},r.a.createElement("ul",{className:"guest-list clean-list"},r.a.createElement("ul",{className:"clean-list flex space-between  "},r.a.createElement("li",null,r.a.createElement("span",null,"Hosted By:")," ",r.a.createElement("span",null,this.props.meal.hostedBy.fullName)),r.a.createElement("li",null,r.a.createElement("span",null,"Date: "),r.a.createElement("span",null,a)),r.a.createElement("li",null,r.a.createElement("span",{onClick:this.onDelete,title:"delete me from event"},"\ud83d\uddd1\ufe0f"))),r.a.createElement("ul",{className:"clean-list flex justify-start"},r.a.createElement("li",null,r.a.createElement("span",null,"Location: ")," ",r.a.createElement("span",null,this.props.meal.location.address))),r.a.createElement("ul",{className:"clean-list flex align-start space-between"},r.a.createElement("li",null,r.a.createElement("span",null,"Cuisine: ")," ",r.a.createElement("span",null,this.props.meal.cuisineType)),r.a.createElement("li",null,r.a.createElement("span",null,"Meal: ")," ",r.a.createElement("span",null,this.props.meal.mealType)),r.a.createElement("li",null,r.a.createElement("span",null,"My Guests:")," ",r.a.createElement("span",null,this.props.meal.total)),r.a.createElement("li",null,r.a.createElement("span",null,"Total Price: ")," ",r.a.createElement("span",null,"$",this.props.meal.price*this.props.meal.total," "),r.a.createElement("small",null,"($",this.props.meal.price," per guest)"))))))}}]),t}(n.Component)),rt=Object(d.f)(nt);function st(e){var t=e.meals,a=e.userId,n=e.onDelete;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},t&&t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",{className:"preview-title "}," ",r.a.createElement("span",null,e.isHosted?"I Am Hosting":"I Am A Guest"," ")),r.a.createElement("div",{className:"tabs-container"},r.a.createElement("div",{className:"tab"},r.a.createElement("input",{className:"checkbox-arrow",type:"checkbox",id:"chck".concat(t)}),r.a.createElement("label",{className:"tab-label",htmlFor:"chck".concat(t)},e.title),r.a.createElement(rt,{onDelete:n,meal:e,userId:a}))))}))))}var ct=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).signToSocketEvent=function(e){F.setup(),F.emit("newChannel","onEventRegistration".concat(e)),F.on("addMsg",a.addMsg)},a.addMsg=function(e){a.loadMeals()},a.resetFilterDefinitions=function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(a.props.setFilter({userId:a.props.match.params.id,at:"",type:"",location:{city:"",country:""},tags:""}));case 2:a.loadMeals();case 3:case"end":return e.stop()}}))},a.loadMeals=function(){a.props.loadUserMeal(a.props.filter)},a.onCreateMeal=function(){a.props.history.push("/meal/edit")},a.mealsToShow=function(){var e,t,n,r;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=a.props.match.params.id,t=[],n=[],r=[],Object(et.a)("meals"),r=Object($.a)(a.props.userMeals),s.next=7,f.a.awrap(r.forEach((function(a){return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.hostedBy._id!=e){r.next=5;break}return r.next=3,f.a.awrap(n.push(a));case 3:r.next=7;break;case 5:return r.next=7,f.a.awrap(t.push(a));case 7:case"end":return r.stop()}}))})));case 7:return s.abrupt("return",{host:n,attended:t});case 8:case"end":return s.stop()}}))},a.onDelete=function(e,t,n){var r,s,c;return f.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,f.a.awrap(a.props.getById(t));case 2:r=Object(v.a)({},a.props.meal),s=r.occurrences.find((function(e){return e.id==n})),c=s.attendees.findIndex((function(t){return t._id==e})),s.attendees.splice(c,1),a.loadMeals();case 7:case"end":return i.stop()}}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.resetFilterDefinitions(),this.signToSocketEvent(this.props.loggedInUser._id);case 2:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this.props.loggedInUser;return e&&r.a.createElement("div",{className:"user-details-container container"},r.a.createElement("div",{className:"user-container"},r.a.createElement("span",null,"Hello, "),r.a.createElement("span",null,e.fullName)),r.a.createElement("div",{className:"controlls-container flex space-between "},r.a.createElement("div",{className:"flex-shrink-50"},r.a.createElement("span",null,"Events ")),r.a.createElement("div",{className:"flex-shrink-50 flex justify-end"},r.a.createElement("button",{className:"btn-sm-md btn-action align-end ",onClick:this.onCreateMeal},"Create Event"))),this.props.userMeals.length>0&&r.a.createElement(st,{onDelete:this.onDelete,meals:this.props.userMeals,userId:e._id}))}}]),t}(n.Component),it={loadUserMeal:I,setFilter:B,add:U,load:k,getById:A},lt=Object(i.b)((function(e){return{userMeals:e.meal.userMeals,meals:e.meal.meals,filter:e.filter.filter,meal:e.meal.selectedMeal,loggedInUser:e.user.loggedInUser}}),it)(ct),ot={uploadImages:function(e){var t,a,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:t=[],a=0;case 2:if(!(a<e.length)){r.next=10;break}return r.next=5,f.a.awrap(ut(e[a]));case 5:n=r.sent,t.push(n.url);case 7:a++,r.next=2;break;case 10:return r.abrupt("return",t);case 11:case"end":return r.stop()}}))},getLatLngFromAddress:function(e){return e=e.replace(/ /g,"+"),b.a.get("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(e,"&key=AIzaSyAlRYsJRB1drgRGQVcSCbwcWhRpcaM7Z08")).then((function(e){return{lat:e.data.results[0].geometry.location.lat,lng:e.data.results[0].geometry.location.lng,address:e.data.results[0].formatted_address}}))}};function ut(e){var t="https://api.cloudinary.com/v1_1/".concat("due4sgv19","/image/upload"),a=new FormData;return a.append("file",e),a.append("upload_preset","ldwisjpq"),fetch(t,{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)}))}var mt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={files:[],displayed:[],drag:!1,msgState:"Drop Here",fileArray:[]},a.fileObj=[],a.dropRef=r.a.createRef(),a.handleDrag=function(e){e.preventDefault(),e.stopPropagation()},a.handleDragIn=function(e){e.preventDefault(),e.stopPropagation(),a.dragCounter++,e.dataTransfer.files&&e.dataTransfer.files.length>0&&a.setState({drag:!0})},a.handleDragOut=function(e){e.preventDefault(),e.stopPropagation(),a.dragCounter--,0===a.dragCounter&&a.setState({drag:!1})},a.handleDrop=function(e){e.preventDefault(),e.stopPropagation(),a.setState({drag:!1}),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(a.setPreviewImages(e.dataTransfer.files),a.props.handleImageUpload(e.dataTransfer.files),e.dataTransfer.clearData(),a.dragCounter=0)},a.checkExistingImages=function(e){return a.state.fileArray.length>0&&(a.props.handleImageUpload(e.target.files),!0)},a.handleChange=function(e){e.preventDefault(),e.stopPropagation(),a.checkExistingImages(e)||(a.setPreviewImages(e.target.files),a.props.handleImageUpload(e.target.files))},a.setPreviewImages=function(e){var t=a.state.fileArray;a.fileObj.push(e);for(var n=0;n<a.fileObj[0].length;n++)t.push(URL.createObjectURL(a.fileObj[0][n]));a.setState({files:t}),a.setState({fileArray:t})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop)}},{key:"componentWillUnmount",value:function(){var e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)}},{key:"componentDidUpdate",value:function(e){e.files!==this.props.files&&this.setState({fileArray:Object($.a)(this.props.files)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"upload-container",ref:this.dropRef},r.a.createElement("div",{className:"left-box"},r.a.createElement("div",{className:"dropzone-wrapper"},r.a.createElement("div",{className:"dropzone-desc"},r.a.createElement("i",{className:"glyphicon glyphicon-download-alt"}),r.a.createElement("p",null,"Choose an image file or drag it here.")),r.a.createElement("input",{type:"file",id:"file-upload",name:"img_logo",className:"dropzone",multiple:!0,accept:"image/*",onChange:this.handleChange}))),r.a.createElement("div",{className:"right-box"},r.a.createElement("div",{className:"preview-zone hidden"},r.a.createElement("div",{className:"box box-solid"},r.a.createElement("div",{className:"box-header with-border"}),r.a.createElement("div",{className:"box-body"},(this.state.fileArray||[]).map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("img",{src:t,className:"preview-image",alt:"..."}),r.a.createElement("i",{className:"far fa-times-circle icon-large",onClick:function(n){return e.props.onImgRemoval(n,t,a)}}))})))))))}}]),t}(n.Component),pt=a(470),dt=a(222),ht=a(228),gt=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(pt.a,{row:!0},r.a.createElement(dt.a,{control:r.a.createElement(ht.a,{checked:this.props.isPromoted,onClick:this.props.handleChange,value:"checked",color:"primary",name:"isPromoted"}),label:this.props.label}))}}]),t}(n.Component),ft=1,vt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={_id:"",hostedBy:{_id:0,fullName:"",imgUrl:""},title:"",description:"",firstCourse:[],mainCourse:[],desserts:[],beverages:[],cuisineType:"",mealType:"",price:0,occurrences:[],capacity:0,address:"",city:"",country:"",lat:"",lng:"",imgUrls:[],firstCourseTmp:"",mainCourseTmp:"",dessertTmp:"",drinkTmp:"",reviews:[],currency:"USD",tags:[],isActive:!0,isPromoted:!1,isBtnEnabled:!0},a.handleImageUpload=function(e){var t,n,r,s;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:t=0;case 1:if(!(t<e.length)){c.next=11;break}if(!(e[t].size>5e6)){c.next=6;break}return c.abrupt("return");case 6:if(e[t].type.includes("jpeg")||e[t].type.includes("jpg")||e[t].type.includes("png")){c.next=8;break}return c.abrupt("return");case 8:t++,c.next=1;break;case 11:return a.setState({isBtnEnabled:!1}),c.next=14,f.a.awrap(ot.uploadImages(e));case 14:n=c.sent,r=a.state.imgUrls,s=r.concat(n),a.setState({imgUrls:s},a.enableBtn);case 18:case"end":return c.stop()}}))},a.enableBtn=function(){a.setState({isBtnEnabled:!0})},a.onHandleChange=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;"isPromoted"===t&&(n=!a.state.isPromoted),a.setState(Object(Be.a)({},t,n))},a.onHandleDateAdd=function(e){e.preventDefault();e.target.name;var t=e.target.value;if(""!==t){var n={id:ft+=1,date:Date.parse(t),attendees:[],total:0};a.setState((function(e){return{occurrences:[].concat(Object($.a)(e.occurrences),[n])}}))}},a.onHandleAddMenuItem=function(e){e.preventDefault();var t=e.target.name,n=e.target.value,r="";switch(t){case"firstCourse":r="firstCourseTmp";break;case"mainCourse":r="mainCourseTmp";break;case"desserts":r="dessertTmp";break;default:r="drinkTmp"}n&&a.setState(Object(Be.a)({},r,n))},a.setTags=function(){var e=[];e.push(a.state.cuisineType),e.push(a.state.mealType),e.push(a.state.title),e.push(a.state.price),e.push(a.state.city),e.push(a.state.country),e.push(a.state.address),e.push(a.state.hostedBy.fullName),e.push(a.state.description),e=(e=(e=(e=e.concat(a.state.firstCourse)).concat(a.state.mainCourse)).concat(a.state.desserts)).concat(a.state.beverages),a.state.occurrences.forEach((function(t){var a=new Date(t.date).toLocaleDateString();e.push(a)})),a.setState({tags:e})},a.onSaveMeal=function(e){var t,n;return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(ot.getLatLngFromAddress(a.state.address+", "+a.state.city+", "+a.state.country));case 2:t=e.sent,a.setTags(),n={_id:a.state._id,isActive:!0,isPromoted:a.state.isPromoted,hostedBy:a.state.hostedBy,menu:{firstCourse:a.state.firstCourse,mainCourse:a.state.mainCourse,desserts:a.state.desserts,beverages:a.state.beverages},location:{city:a.state.city,country:a.state.country,address:a.state.address,lat:t.lat,lng:t.lng},imgUrls:a.state.imgUrls,title:a.state.title,description:a.state.description,cuisineType:a.state.cuisineType,mealType:a.state.mealType,price:a.state.price,occurrences:a.state.occurrences,capacity:a.state.capacity,reviews:a.state.reviews,currency:a.state.currency,tags:a.state.tags},a.props.meal||delete n._id,a.props.onSaveMeal(n);case 7:case"end":return e.stop()}}))},a.handleDateRemoval=function(e,t){var n=Object($.a)(e);n.splice(t,1),a.setState(Object(v.a)({},a.state,{occurrences:n}))},a.handleMenuItemRemoval=function(e,t,n){var r;switch(e.target.nodeName){case"I":r=e.target.classList[0];break;default:r=e.target.name}var s=Object($.a)(t);s.splice(n,1),a.setState(Object(Be.a)({},r,s))},a.onAddMenuItem=function(e){var t,n;switch(e.preventDefault(),e.target.nodeName){case"I":t=e.target.parentNode.name;break;default:t=e.target.name}switch(t){case"firstCourse":n=a.state.firstCourseTmp,a.setState({firstCourseTmp:""});break;case"mainCourse":n=a.state.mainCourseTmp,a.setState({mainCourseTmp:""});break;case"desserts":n=a.state.dessertTmp,a.setState({dessertTmp:""});break;default:n=a.state.drinkTmp,a.setState({drinkTmp:""})}if(n){var r=a.state[t],s=Object($.a)(r);s.push(n),a.setState(Object(Be.a)({},t,s))}},a.onImgRemoval=function(e,t,n){var r=Object($.a)(a.state.imgUrls);r.splice(n,1),a.setState({imgUrls:r})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){if(this.props.meal){var e=this.props.meal;this.setState({hostedBy:Object(v.a)({},e.hostedBy),_id:e._id,isActive:e.isActive,isPromoted:e.isPromoted,tags:Object($.a)(e.tags),title:e.title,description:e.description,firstCourse:Object($.a)(e.menu.firstCourse),mainCourse:Object($.a)(e.menu.mainCourse),desserts:Object($.a)(e.menu.desserts),beverages:Object($.a)(e.menu.beverages),cuisineType:e.cuisineType,mealType:e.mealType,price:e.price,capacity:e.capacity,occurrences:Object($.a)(e.occurrences),address:e.location.address,city:e.location.city,country:e.location.country,lat:e.location.lat,lng:e.location.lng,reviews:Object($.a)(e.reviews),imgUrls:Object($.a)(e.imgUrls)})}else this.setState({hostedBy:this.props.loggedInUser})}},{key:"componentDidUpdate",value:function(e){if(JSON.stringify(e.meal)!==JSON.stringify(this.props.meal)&&this.props.meal){var t=this.props.meal;this.setState({hostedBy:Object(v.a)({},t.hostedBy),_id:t._id,isActive:t.isActive,isPromoted:t.isPromoted,tags:Object($.a)(t.tags),title:t.title,description:t.description,firstCourse:Object($.a)(t.menu.firstCourse),mainCourse:Object($.a)(t.menu.mainCourse),desserts:Object($.a)(t.menu.desserts),beverages:Object($.a)(t.menu.beverages),cuisineType:t.cuisineType,mealType:t.mealType,price:t.price,capacity:t.capacity,occurrences:Object($.a)(t.occurrences),address:t.location.address,city:t.location.city,country:t.location.country,lat:t.location.lat,lng:t.location.lng,reviews:Object($.a)(t.reviews),imgUrls:Object($.a)(t.imgUrls)})}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{className:"",onSubmit:this.onSaveMeal},r.a.createElement("div",{className:"image-container"},r.a.createElement("h4",null,"Images"),r.a.createElement(mt,{onImgRemoval:this.onImgRemoval,handleImageUpload:this.handleImageUpload,files:this.state.imgUrls})),r.a.createElement("div",{className:"event-info-container"},r.a.createElement("h4",null,"Details"),r.a.createElement("div",{className:"card-bottom-border flex column"},r.a.createElement("div",{className:"title"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",placeholder:"Event Name",id:"title",name:"title",value:this.state.title,onChange:this.onHandleChange,className:"input-form",required:!0})),r.a.createElement("div",{className:"description"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{id:"description",name:"description",value:this.state.description,placeholder:"Description",onChange:this.onHandleChange,className:"textarea-form",required:!0})),r.a.createElement("div",{className:"cuisineType"},r.a.createElement("label",{htmlFor:"cuisineType"},"Cuisine"),r.a.createElement("input",{type:"text",placeholder:"Cuisine",name:"cuisineType",id:"cuisineType",value:this.state.cuisineType,onChange:this.onHandleChange,className:"input-form",required:!0})),r.a.createElement("div",{className:"mealType"},r.a.createElement("label",{htmlFor:"mealType"},"Meal"),r.a.createElement("input",{type:"text",placeholder:"Dinner | Lunch | Breakfest",name:"mealType",id:"mealType",value:this.state.mealType,onChange:this.onHandleChange,className:"input-form",required:!0})),r.a.createElement("div",{className:"flex row flex space-between"},r.a.createElement("div",{className:"address flex-basis-1 margin-right-10"},r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement("input",{type:"text",placeholder:"Address",name:"address",id:"address",value:this.state.address,onChange:this.onHandleChange,className:"input-form",required:!0})),r.a.createElement("div",{className:"state flex-basis-1 margin-right-10"},r.a.createElement("label",{htmlFor:"state"},"Country"),r.a.createElement("input",{type:"text",placeholder:"State",name:"country",id:"country",value:this.state.country,onChange:this.onHandleChange,className:"input-form",required:!0})),r.a.createElement("div",{className:"city flex-basis-1"},r.a.createElement("label",{htmlFor:"city"},"City"),r.a.createElement("input",{type:"text",placeholder:"City",name:"city",id:"city",value:this.state.city,onChange:this.onHandleChange,className:"input-form",required:!0}))),r.a.createElement("div",{className:"price-capacity flex"},r.a.createElement("div",{className:"price flex-basis-1 margin-right-20"},r.a.createElement("label",{htmlFor:"price"},"Price"),r.a.createElement("input",{type:"text",placeholder:"Price",id:"price",name:"price",value:this.state.price,onChange:this.onHandleChange,className:"input-form",required:!0})),r.a.createElement("div",{className:"capacity flex-basis-1"},r.a.createElement("label",{htmlFor:"capacity"},"How many people"),r.a.createElement("input",{type:"number",placeholder:"Capacity",id:"capacity",name:"capacity",value:this.state.capacity,onChange:this.onHandleChange,className:"input-form",required:!0}))),r.a.createElement("div",{className:"flex row flex space-even"},r.a.createElement("div",{className:"date flex-basis-1 margin-right-20"},r.a.createElement("div",{className:"flex align-center"},r.a.createElement("div",{className:"flex column margin-right-20 width-50"},r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement("input",Object(Be.a)({className:"input-date",type:"date",name:"date",placeholder:"Date",id:"date",onChange:this.onHandleDateAdd,value:this.state.occurences},"className","input-date"))),r.a.createElement("div",{className:"promotion flex-basis-1"},r.a.createElement(gt,{label:"Would you like to promote your event?",handleChange:this.onHandleChange,isPromoted:this.state.isPromoted}))),r.a.createElement("div",{className:"width-50"},this.state.occurrences&&r.a.createElement("div",null,r.a.createElement("ul",{className:"clean-list occurrence-list"}," ",this.state.occurrences.map((function(t,a){var n=new Date(t.date).toLocaleDateString();return r.a.createElement("li",{className:"occurrence-date",key:a},n,r.a.createElement("span",null,r.a.createElement("i",{className:"far fa-times-circle icon-small",onClick:function(){return e.handleDateRemoval(e.state.occurrences,a)}})))}))))))))),r.a.createElement("div",{className:"event-menu-container"},r.a.createElement("h4",null,"Menu"),r.a.createElement("div",{className:"card-bottom-border menu-main-container flex column align-center justify-center"},r.a.createElement("div",{className:"menu-container"},r.a.createElement("div",{className:"card-title menu-section flex column"},r.a.createElement("h3",null,"First Course"),r.a.createElement("div",{className:"course-title-wrapper flex justify-center"},r.a.createElement("div",{className:"menu-item"},r.a.createElement("input",{type:"text",placeholder:"First course dish",name:"firstCourse",value:this.state.firstCourseTmp,className:"input-form",onChange:this.onHandleAddMenuItem,required:!0}),this.state.firstCourse&&r.a.createElement("div",null,r.a.createElement("ul",{className:"clean-list "}," ",this.state.firstCourse.map((function(t,a){return r.a.createElement("li",{className:"menu-list-courses",name:"firstCourse",key:a},t,r.a.createElement("i",{className:"firstCourse far fa-times-circle icon-small",name:"firstCourse",onClick:function(t){return e.handleMenuItemRemoval(t,e.state.firstCourse,a)}}))}))))),r.a.createElement("a",{name:"firstCourse",className:"",title:"Add new menu item",href:"#",onClick:this.onAddMenuItem,required:!0},r.a.createElement("i",{name:"firstCourse",className:"icon-larger fas fa-plus-square"})))),r.a.createElement("div",{className:"card-title menu-section flex column"},r.a.createElement("h3",null,"Main Course"),r.a.createElement("div",{className:"course-title-wrapper flex justify-center"},r.a.createElement("div",{className:"menu-item"},r.a.createElement("input",{type:"text",placeholder:"Main course dish",name:"mainCourse",value:this.state.mainCourseTmp,className:"input-form",onChange:this.onHandleAddMenuItem,required:!0}),this.state.mainCourse&&r.a.createElement("div",null,r.a.createElement("ul",{className:"clean-list "}," ",this.state.mainCourse.map((function(t,a){return r.a.createElement("li",{className:"menu-list-courses",name:"mainCourse",key:a},t,r.a.createElement("i",{className:"mainCourse far fa-times-circle icon-small",name:"mainCourse",onClick:function(t){return e.handleMenuItemRemoval(t,e.state.mainCourse,a)}}))}))))),r.a.createElement("a",{name:"mainCourse",className:"",title:"Add new menu item",href:"",onClick:this.onAddMenuItem},r.a.createElement("i",{name:"mainCourse",className:"icon-larger fas fa-plus-square"})))),r.a.createElement("div",{className:"card-title menu-section flex column"},r.a.createElement("h3",null,"Dessert"),r.a.createElement("div",{className:"course-title-wrapper flex justify-center"},r.a.createElement("div",{className:"menu-item"},r.a.createElement("input",{type:"text",placeholder:"Dessert",name:"desserts",className:"input-form",value:this.state.dessertTmp,onChange:this.onHandleAddMenuItem,required:!0}),this.state.desserts&&r.a.createElement("div",null,r.a.createElement("ul",{className:"clean-list "}," ",this.state.desserts.map((function(t,a){return r.a.createElement("li",{className:"menu-list-courses",name:"desserts",key:a},t,r.a.createElement("i",{className:"desserts far fa-times-circle icon-small",name:"desserts",onClick:function(t){return e.handleMenuItemRemoval(t,e.state.desserts,a)}}))}))))),r.a.createElement("a",{name:"desserts",className:"",title:"Add new menu item",href:"",onClick:this.onAddMenuItem},r.a.createElement("i",{name:"desserts",className:"icon-larger fas fa-plus-square"})))),r.a.createElement("div",{className:"card-title menu-section flex column"},r.a.createElement("h3",null,"Beverage"),r.a.createElement("div",{className:"course-title-wrapper flex justify-center"},r.a.createElement("div",{className:"menu-item"},r.a.createElement("input",{type:"text",placeholder:"Beverage",name:"beverages",className:"input-form",value:this.state.drinkTmp,onChange:this.onHandleAddMenuItem,required:!0}),this.state.beverages&&r.a.createElement("div",null,r.a.createElement("ul",{className:"clean-list "},this.state.beverages.map((function(t,a){return r.a.createElement("li",{className:"menu-list-courses",name:"beverages",key:a},t,r.a.createElement("i",{className:"beverages far fa-times-circle icon-small",name:"beverages",onClick:function(t){return e.handleMenuItemRemoval(t,e.state.beverages,a)}}))}))))),r.a.createElement("a",{name:"beverages",className:"",title:"Add new menu item",href:"",onClick:this.onAddMenuItem},r.a.createElement("i",{name:"beverages",className:"icon-larger fas fa-plus-square"}))))))),r.a.createElement("div",{className:"save"},r.a.createElement("button",{className:"button btn-lg btn-main",onClick:this.onSaveMeal,disabled:!this.state.isBtnEnabled},"SAVE"))))}}]),t}(n.Component),yt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onSaveMeal=function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Object(v.a)({},a.props.loggedInUser),n.next=3,f.a.awrap(a.props.add(e));case 3:a.props.history.push("/user/".concat(t._id));case 4:case"end":return n.stop()}}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.props.match.params.id)){t.next=4;break}return t.next=4,f.a.awrap(this.props.getById(e));case 4:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=Object(v.a)({},this.props.loggedInUser),t=this.props.match.params.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container main-form-container"},r.a.createElement("h2",null,"Event"),(t&&this.props.meal||!t)&&r.a.createElement(vt,{loggedInUser:e,onSaveMeal:this.onSaveMeal,meal:t?this.props.meal:""})))}}]),t}(n.Component),Et={getById:A,add:U},bt=Object(i.b)((function(e){return{loggedInUser:e.user.loggedInUser,meal:e.meal.selectedMeal}}),Et)(yt);function Ot(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function wt(){return sessionStorage.getItem("user")}var Nt={login:function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(N("".concat("auth","/login"),e));case 2:return t=a.sent,a.abrupt("return",Ot(t));case 4:case"end":return a.stop()}}))},signup:function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(N("".concat("auth","/signup"),e));case 2:return t=a.sent,a.abrupt("return",Ot(t));case 4:case"end":return a.stop()}}))},logout:function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(N("".concat("auth","/logout")));case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}))},getById:function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.awrap(w("".concat("user","/").concat(e)));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))},checkConnection:function(){return!!wt()},getUserLoggedIn:wt};function xt(e){return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(Nt.login(e));case 2:a=n.sent,t(kt(a));case 4:case"end":return n.stop()}}))}}function jt(e){return function(t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(Nt.signup(e));case 2:a=n.sent,t(It(a));case 4:case"end":return n.stop()}}))}}function Ct(){return function(e){return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.awrap(Nt.logout());case 2:e(kt(null));case 3:case"end":return t.stop()}}))}}function kt(e){return{type:"SET",user:e}}function It(e){return{type:"ADD",user:e}}function Dt(e){return e&&r.a.createElement("div",{className:"msg-notification-container clean-list"},r.a.createElement("div",{className:"notification-img"},r.a.createElement("img",{className:"user-img-profile",src:e.user.imgUrl})),r.a.createElement("div",{className:"user-info-notification"},r.a.createElement("span",null,"Just now"),r.a.createElement("span",null," ",e.user.fullName),r.a.createElement("span",null,"has just signed-in to your event"),r.a.createElement("span",null,e.user.titelHost)))}var Tt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={showNotification:!1,registeredUser:{}},a.signToSocketEvent=function(e){F.setup(),F.emit("newChannel","onEventRegistration".concat(e)),F.on("addMsg",a.addMsg)},a.addMsg=function(e){console.log("Header -> ",e),a.setState({showNotification:!0,registeredUser:e.loggedInUser}),setTimeout(a.resetNotification,8e3)},a.resetNotification=function(){a.setState({showNotification:!1,registeredUser:""})},a.onLogout=function(e){e.preventDefault(),a.unSignToSocketEvent(),a.props.logout(),a.props.history.push("/")},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.loggedInUser&&this.signToSocketEvent(this.props.loggedInUser._id)}},{key:"componentDidUpdate",value:function(e){e.loggedInUser!==this.props.loggedInUser&&this.props.loggedInUser&&this.signToSocketEvent(this.props.loggedInUser._id)}},{key:"componentWillUnmount",value:function(){this.unSignToSocketEvent()}},{key:"render",value:function(){return[this.state.showNotification&&r.a.createElement(je,{open:!0,msg:r.a.createElement(Dt,{user:this.state.registeredUser})}),r.a.createElement("div",{className:"main-header-container flex align-center space-between"},r.a.createElement("div",{className:"container logo flex-basis-60 "},r.a.createElement(G.a,{to:"/"},r.a.createElement("span",null,"umami"))),r.a.createElement("div",{className:"nav-container container flex-basis-30 flex justify-end"},r.a.createElement("div",{className:"controls flex-basis-1 flex row align-center justify-end"},r.a.createElement("div",{className:"margin-right-10"}),this.props.loggedInUser&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"logged-user-container"},r.a.createElement(G.a,{className:"",to:"/user/".concat(this.props.loggedInUser._id)},r.a.createElement("img",{style:{width:"60px",height:"60px"},src:"https://res.cloudinary.com/contentexs/image/upload/v1580171634/user-round.svg",alt:""}))),r.a.createElement("span",null,"|"),r.a.createElement("div",null,r.a.createElement("a",{href:"",onClick:this.onLogout},"logout"))),!this.props.loggedInUser&&r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{className:" ",to:"/user/login"},"log-in")))))]}}]),t}(n.Component),St={logout:Ct,addMsg:Pe},Mt=Object(d.f)(Object(i.b)((function(e){return{loggedInUser:e.user.loggedInUser,msg:e.socket.msg}}),St)(Tt));a(419);var At=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={modalIsOpen:!1,fullName:"",username:"",password:"",email:"",phone:"",imgUrl:""},a.changeInput=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(Be.a)({},t,n))},a.onSignup=function(){var e=a.state;delete e.modalIsOpen,a.props.signup(e)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("a",{onClick:this.openModal},"signup"),r.a.createElement("div",{className:"log-in"},r.a.createElement("input",{type:"text",className:"margin-top-10",placeholder:"Full Name",onChange:this.changeInput,name:"fullName"}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"margin-top-10",placeholder:"User Name",onChange:this.changeInput,name:"username"}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",className:"margin-top-10",placeholder:"Password",onChange:this.changeInput,name:"password"}),r.a.createElement("br",null),r.a.createElement("input",{type:"phone",className:"margin-top-10",placeholder:"Phone",onChange:this.changeInput,name:"phone"}),r.a.createElement("br",null),r.a.createElement("input",{type:"imgUrl",className:"margin-top-10",placeholder:"imgUrl",onChange:this.changeInput,name:"imgUrl"}),r.a.createElement("br",null),r.a.createElement("input",{type:"email",className:"margin-top-10",placeholder:"email",onChange:this.changeInput,name:"email"}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn-lg btn-action",onClick:this.onSignup},"sign-up")))}}]),t}(n.Component),Ut={signup:jt},Lt=Object(i.b)(null,Ut)(At),Rt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",isHide:!0},a.changeInput=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(Be.a)({},t,n))},a.onLogInUser=function(){var e,t,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=a.state.email,t=a.state.password,n={email:e,password:t},r.next=5,f.a.awrap(a.props.login(n));case 5:a.props.history.goBack();case 6:case"end":return r.stop()}}))},a.changeForm=function(){a.setState((function(e){return{isHide:!e.isHide}}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.isHide?"hide":"show-block",t=this.state.isHide?"show-block":"hide";return r.a.createElement("div",{className:"flex column align-center justify-center"},r.a.createElement("div",{className:t},r.a.createElement("div",null,"Log-in"),r.a.createElement("div",null,r.a.createElement("input",{name:"email",onChange:this.changeInput,value:this.state.email,type:"text",className:"login-input",placeholder:" email"})),r.a.createElement("div",{className:"margin-top-10"},r.a.createElement("input",{name:"password",onChange:this.changeInput,value:this.state.password,type:"password",className:"login-input",placeholder:" Password"})),r.a.createElement("div",{className:"margin-top-10 login-btns-warpper"},r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"btn-lg btn-action",onClick:this.onLogInUser},"Login")))),r.a.createElement("div",{className:e},r.a.createElement(Lt,null)),r.a.createElement("span",{className:"cursor-pointer",onClick:this.changeForm},"If you are not registered click here to register"))}}]),t}(n.Component),_t={login:xt},Ft=Object(i.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),_t)(Rt),Bt=(a(428),a(429),Object(h.a)()),Pt=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{history:Bt},r.a.createElement(Mt,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{component:oe,path:"/",exact:!0}),r.a.createElement(d.a,{component:bt,path:"/meal/edit/:id?"}),r.a.createElement(d.a,{component:Oe,path:"/meal/location/:location?"}),r.a.createElement(d.a,{component:Oe,path:"/meal/cuisine/:cuisine?"}),r.a.createElement(d.a,{component:Oe,path:"/meal/results/:results?"}),r.a.createElement(d.a,{component:Ft,path:"/user/login",exact:!0}),r.a.createElement(d.a,{component:Ze,path:"/meal/:id",exact:!0}),r.a.createElement(d.a,{component:lt,path:"/user/:id",exact:!0}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ht=a(47),qt=a(246),Yt={filter:{userId:"",at:"",type:"",location:{city:"",country:""},tags:""}};var Gt={meals:[],userMeals:[],selectedMeal:null,cities:[],cuisines:[],filteredMeal:null};var Wt={createReducer:function(e,t){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(n.type)?t[n.type](a,n):a}},updateObject:function(e,t){return Object.assign({},e,t)},addItemToState:function(e,t){return[].concat(Object($.a)(e),[t])},updateItemInState:function(e,t,a){return e.map((function(e){return e.id!==t?e:a(e)}))},removeItemFromState:function(e,t){return e.filter((function(e){return e.id!==t}))}};var $t=null;sessionStorage.user&&($t=JSON.parse(sessionStorage.user));var zt={loggedInUser:$t};var Jt=Wt.createReducer(zt,{SET:function(e,t){return Object(v.a)({},e,{loggedInUser:t.user})},ADD:function(e,t){return Object(v.a)({},e,{loggedInUser:t.user})}}),Kt={isLoading:!1},Vt={msg:""};var Xt=Object(Ht.c)({system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(v.a)({},e,{isLoading:!0});case"LOADING_DONE":return Object(v.a)({},e,{isLoading:!1});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_FILTER":return Object(v.a)({},e,{filter:Object(v.a)({},t.filter)});default:return e}},meal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOAD":return Object(v.a)({},e,{meals:t.meals});case"GET_BY_ID":return Object(v.a)({},e,{selectedMeal:t.meal});case"ADD":return Object(v.a)({},e,{meals:[].concat(Object($.a)(e.meals),[t.meal]),selectedMeal:t.meal});case"UPDATE":return Object(v.a)({},e,{meals:e.meals.map((function(e){return t.meal._id===e._id?t.meal:e})),selectedMeal:t.meal});case"REMOVE":return Object(v.a)({},e,{meals:e.meals.filter((function(e){return e._id!==t.id}))});case"LOAD_CITIES":return Object(v.a)({},e,{cities:Object($.a)(t.citiesToReducer)});case"LOAD_CUISINES":return Object(v.a)({},e,{cuisines:Object($.a)(t.cuisineTypesToReducer)});case"LOAD_TAGS":return Object(v.a)({},e,{tags:Object($.a)(t.tags)});case"LOAD_USER_MEAL":return Object(v.a)({},e,{userMeals:t.userMeals});case"LOAD_MEAL_FOR_REGISTRATION":return Object(v.a)({},e,{filteredMeal:t.filteredMeal});default:return e}},user:Jt,socket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"ADD_MSG":return Object(v.a)({},e,{msg:t.msg});default:return e}}}),Qt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ht.d,Zt=Object(Ht.e)(Xt,Qt(Object(Ht.a)(qt.a)));c.a.render(r.a.createElement(i.a,{store:Zt},r.a.createElement(Pt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[262,1,2]]]);
//# sourceMappingURL=main.33960b27.chunk.js.map